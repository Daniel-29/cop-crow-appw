"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[2835],{6657:function(e,t,i){i.d(t,{_:function(){return Z}});var n=i(3679),o=i(22238),s=i(37716),r=i(53817),a=i(51095),l=i(98295),c=i(67441),u=i(38583),d=i(76627),p=i(49983),h=i(72458);function m(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"mat-option",20),s._uU(2),s.qZA(),s.BQk()),2&e){const e=t.$implicit;s.xp6(1),s.Q6J("value",e),s.xp6(1),s.Oqu(e.label)}}function g(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1,"Debe ingresar este campo!!"),s.qZA())}function f(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"th",16),s._uU(2),s.qZA(),s.BQk()),2&e){const e=t.$implicit;s.xp6(2),s.hij(" ",e.label," ")}}const y=function(e,t){return{"bg-gray-500":e,"bg-white border-b hover:bg-gray-300":t}};function b(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.TgZ(1,"tr",21),s.TgZ(2,"td",22),s._uU(3),s.qZA(),s.TgZ(4,"td",23),s._uU(5),s.qZA(),s.TgZ(6,"td",23),s._uU(7),s.qZA(),s.TgZ(8,"td",23),s._uU(9),s.qZA(),s.TgZ(10,"td",23),s._uU(11),s.qZA(),s.TgZ(12,"td",23),s._uU(13),s.qZA(),s.TgZ(14,"td",23),s._uU(15),s.qZA(),s.TgZ(16,"td",23),s._uU(17),s.qZA(),s.TgZ(18,"td",23),s.TgZ(19,"div",24),s.TgZ(20,"button",25),s.NdJ("click",function(){const t=s.CHM(e).$implicit;return s.oxw().onSelectChange(t.node)}),s.TgZ(21,"mat-icon"),s._uU(22,"select_all"),s.qZA(),s.TgZ(23,"span",26),s._uU(24,"Seleccionar"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.BQk()}if(2&e){const e=t.$implicit,i=s.oxw();s.xp6(1),s.Q6J("ngClass",s.WLB(9,y,e.node.id==i.companyId,e.node.id!=i.companyId)),s.xp6(2),s.hij(" ",e.node.code," "),s.xp6(2),s.hij(" ",e.node.name," "),s.xp6(2),s.hij(" ",e.node.contact," "),s.xp6(2),s.hij(" ",e.node.position," "),s.xp6(2),s.hij(" ",e.node.email," "),s.xp6(2),s.hij(" ",e.node.phone_number," "),s.xp6(2),s.hij(" ",e.node.id_institution_type.edges.length>0?e.node.id_institution_type.edges[0].node.name:""," "),s.xp6(2),s.hij(" ",e.node.id_institution_clasification.edges.length>0?e.node.id_institution_clasification.edges[0].node.name:""," ")}}let Z=(()=>{class e{constructor(e,t,i){var o;this.dialogRef=e,this.data=t,this.companyService=i,this.listRegistry=[],this.fields=[{label:"Codigo",field:"code",type:"field",searchable:!0,placeholder:"Codigo"},{label:"Nombre",field:"name",type:"field",searchable:!0,placeholder:"Nombre"},{label:"Contacto",field:"contact",type:"field",searchable:!0,placeholder:"Contacto"},{label:"Posicion",field:"position",type:"field",searchable:!0,placeholder:"Posicion"},{label:"Telefono",field:"phone_number",type:"field",searchable:!0,placeholder:"Telefono"},{label:"Correo",field:"email",type:"field",searchable:!0,placeholder:"Correo"},{label:"Tipo",field:"id_institution_type",type:"relation"},{label:"Clasificacion",field:"id_institution_clasification",type:"relation"}],this.companyId=null,this.company=null,this.isSelected=!1,this.searchForm=new n.cw({field:new n.NI(null===(o=this.fields[0])||void 0===o?void 0:o.field,[n.kI.minLength(1),n.kI.required]),value:new n.NI("",[n.kI.minLength(1),n.kI.required])}),null!=t.company&&(this.companyId=t.company),this.onLoadMainData()}onLoadMainData(){this.companyService.getCompanies("").subscribe(e=>{this.listRegistry=e.data.companies.edges})}onSearchMainData(){if(this.searchForm.valid){const e=this.companyService.buildQuery([this.searchForm.controls.field.value.field,this.searchForm.controls.value.value,this.searchForm.controls.field.value.type]);this.companyService.getCompanies(e).subscribe(e=>{this.listRegistry=e.data.companies.edges})}}onSelectChange(e){e.id===this.companyId?(this.isSelected=!1,this.companyId=null,this.company=null):(this.companyId=e.id,this.isSelected=!0,this.company=e)}onSaveSelection(){this.dialogRef.close({code:"onSaveSelection",company:this.company})}onCancelSelection(){this.dialogRef.close({code:"onSelectionCancel",company:this.company})}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(o.so),s.Y36(o.WI),s.Y36(r.J))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-select-company"]],decls:37,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"h-full","w-full","min-w-0","ng-star-inserted"],[1,"flex","flex-col","sm:flex-row","w-full","sm:max-w-none","mb-4",3,"formGroup"],["mat-stroked-button","",1,"h-full","mt-1","sm:mr-4",3,"click"],[1,"items-center","h-full"],[1,"fuse-mat-no-subscript","w-full","sm:w-1/5"],["formControlName","field"],[4,"ngFor","ngForOf"],[1,"fuse-mat-no-subscript","w-full","sm:w-3/6","mt-4","sm:mt-0","sm:ml-4",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["placeholder","Search by title or description","matInput","","formControlName","value"],[4,"ngIf"],["mat-stroked-button","",1,"h-full","mt-1","sm:ml-4",3,"click"],[1,"min-w-full","text-center"],[1,"border-b","bg-gray-800"],["scope","col",1,"text-sm","font-medium","text-white","px-6","py-4"],[1,"my-1"],["mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-button","",3,"click"],[3,"value"],[3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-900","font-light","whitespace-nowrap"],[1,"flex","items-center","w-full"],[1,"flex","flex-auto","items-center","justify-center","py-4","hover:bg-blue-500",3,"click"],[1,"ml-2"]],template:function(e,t){1&e&&(s.TgZ(0,"div"),s.TgZ(1,"h2",0),s._uU(2,"Seleccion de empresa:"),s.qZA(),s.TgZ(3,"div",1),s.ynx(4),s.TgZ(5,"div",2),s.TgZ(6,"form",3),s.TgZ(7,"button",4),s.NdJ("click",function(){return t.onLoadMainData()}),s.TgZ(8,"span",5),s.TgZ(9,"span"),s._uU(10,"Reset"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"mat-form-field",6),s.TgZ(12,"mat-select",7),s.YNc(13,m,3,2,"ng-container",8),s.qZA(),s.qZA(),s.TgZ(14,"mat-form-field",9),s._UZ(15,"mat-icon",10),s._UZ(16,"input",11),s.TgZ(17,"mat-error"),s.YNc(18,g,2,0,"span",12),s.qZA(),s.qZA(),s.TgZ(19,"button",13),s.NdJ("click",function(){return t.onSearchMainData()}),s.TgZ(20,"span",5),s.TgZ(21,"span"),s._uU(22,"Buscar"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.ynx(23),s.TgZ(24,"table",14),s.TgZ(25,"thead",15),s.TgZ(26,"tr"),s.YNc(27,f,3,1,"ng-container",8),s.TgZ(28,"th",16),s._uU(29," Acciones "),s.qZA(),s.qZA(),s.qZA(),s.TgZ(30,"tbody"),s.YNc(31,b,25,12,"ng-container",8),s.qZA(),s.qZA(),s.BQk(),s.qZA(),s.BQk(),s.TgZ(32,"div",17),s.TgZ(33,"button",18),s.NdJ("click",function(){return t.onSaveSelection()}),s._uU(34," Save "),s.qZA(),s.TgZ(35,"button",19),s.NdJ("click",function(){return t.onCancelSelection()}),s._uU(36," Cancel "),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(6),s.Q6J("formGroup",t.searchForm),s.xp6(7),s.Q6J("ngForOf",t.fields),s.xp6(1),s.Q6J("floatLabel","always"),s.xp6(1),s.Q6J("svgIcon","heroicons_solid:search"),s.xp6(3),s.Q6J("ngIf",t.searchForm.get("value").hasError("required")&&t.searchForm.get("value").touched),s.xp6(9),s.Q6J("ngForOf",t.fields),s.xp6(4),s.Q6J("ngForOf",t.listRegistry),s.xp6(2),s.Q6J("disabled",!t.isSelected))},directives:[o.uh,o.xY,n._Y,n.JL,n.sg,a.lW,l.KE,c.gD,n.JJ,n.u,u.sg,d.Hw,l.qo,p.Nt,n.Fj,l.TO,u.O5,h.ey,u.mk],styles:[""]}),e})()},53817:function(e,t,i){i.d(t,{J:function(){return p}});var n=i(50752),o=i(59193),s=i(94402),r=i(40205),a=i(15257),l=i(5304),c=i(37716),u=i(94270),d=i(1400);let p=(()=>{class e{constructor(e,t,i){this.apollo=e,this.supaBaseService=t,this._fuseConfirmationService=i,this.table="company"}getCompanies(e){return this.apollo.watchQuery({query:n.Ps`
          query listCompanies {
            companies${e} {
              pageInfo {
                hasNextPage
                hasPreviousPage
              }
              edges {
                node {
                  id
                  name
                  code
                  contact
                  position
                  email
                  phone_number
                  id_institution_type {
                    edges {
                      node {
                        id
                        name
                      }
                    }
                  }
                  id_institution_clasification {
                    edges {
                      node {
                        id
                        name
                      }
                    }
                  }
                }
              }
              count
            }
          }
        `,fetchPolicy:"network-only"}).valueChanges.pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),o.E)))}get(e=[],t=0,i=100){return(0,s.D)(this.supaBaseService.onSelectRequest(this.table,t,i,"\n    *, \n    id_institution_type!inner(*), \n    id_institution_clasification!inner(*)\n    ",e)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),o.E)))}getClasificationCompany(e=[],t=0,i=100){return(0,s.D)(this.supaBaseService.onSelectRequest("institution_clasification",t,i,"\n    *\n    ",e)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),o.E)))}getTypesCompany(e=[],t=0,i=100){return(0,s.D)(this.supaBaseService.onSelectRequest("institution_type",t,i,"\n    *\n    ",e)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),o.E)))}insert(e){return(0,s.D)(this.supaBaseService.onInsertRequest(this.table,e)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),o.E)))}update(e,t){return(0,s.D)(this.supaBaseService.onUpdateRequest(this.table,t,e)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),o.E)))}delete(e){return(0,s.D)(this.supaBaseService.onDeleteRequest(this.table,e)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),o.E)))}buildQuery(e){let t=[];for(let i=0;i<e.length;i+=3)t.push("relation"==e[i+2]?`${e[i]}:{have:{name:{matchesRegex:"${e[i+1]}"}}}`:`${e[i]}:{matchesRegex:"${e[i+1]}"}`);return`(where:{${t.toString()}})`}onSuccessDialog(e){this._fuseConfirmationService.open({title:"Alerta",message:`Se ${e} el registro correctamente.`,icon:{show:!0,name:"heroicons_outline:badge-check",color:"success"},actions:{confirm:{show:!1,label:"Si",color:"primary"},cancel:{show:!1,label:"No"}},dismissible:!0})}errorHandle(e){return this._fuseConfirmationService.open({title:"Error",message:"Error insperado!!!",icon:{show:!0,name:"heroicons_outline:exclamation",color:"error"},actions:{confirm:{show:!1,label:"string",color:"primary"},cancel:{show:!1,label:"string"}},dismissible:!0}),(0,r._)("error")}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(n._M),c.LFG(u.P),c.LFG(d.R))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},28456:function(e,t,i){i.d(t,{q:function(){return p}});var n=i(50752),o=i(94402),s=i(59193),r=i(40205),a=i(15257),l=i(5304),c=i(37716),u=i(94270),d=i(1400);let p=(()=>{class e{constructor(e,t,i){this.apollo=e,this.supaBaseService=t,this._fuseConfirmationService=i,this.table="degree"}get(e="*",t=null,i=null){return(0,o.D)(this.supaBaseService.onSelectRequest(this.table)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),s.E)))}insert(e){return(0,o.D)(this.supaBaseService.onInsertRequest(this.table,{name:e})).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),s.E)))}update(e,t){return(0,o.D)(this.supaBaseService.onUpdateRequest(this.table,{name:t},e)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),s.E)))}delete(e){return(0,o.D)(this.supaBaseService.onDeleteRequest(this.table,e)).pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),s.E)))}getDegrees(e){return this.apollo.watchQuery({query:n.Ps`
          query listDegrees {
            degrees {
              pageInfo {
                hasNextPage
                hasPreviousPage
              }
              edges {
                node {
                  id
                  name
                }
              }
              count
            }
          }
        `,fetchPolicy:"network-only"}).valueChanges.pipe((0,a.q)(1),(0,l.K)((e,t)=>(this.errorHandle(e),s.E)))}onSuccessDialog(e){this._fuseConfirmationService.open({title:"Alerta",message:`Se ${e} el registro correctamente.`,icon:{show:!0,name:"heroicons_outline:badge-check",color:"success"},actions:{confirm:{show:!1,label:"Si",color:"primary"},cancel:{show:!1,label:"No"}},dismissible:!0})}errorHandle(e){return this._fuseConfirmationService.open({title:"Error",message:"Error insperado!!!",icon:{show:!0,name:"heroicons_outline:exclamation",color:"error"},actions:{confirm:{show:!1,label:"string",color:"primary"},cancel:{show:!1,label:"string"}},dismissible:!0}),(0,r._)("error")}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(n._M),c.LFG(u.P),c.LFG(d.R))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);