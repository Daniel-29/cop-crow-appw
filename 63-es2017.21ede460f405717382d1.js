"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[63],{6657:function(e,i,t){t.d(i,{_:function(){return w}});var n=t(3679),o=t(22238),r=t(37716),s=t(53817),l=t(51095),a=t(98295),c=t(67441),d=t(38583),u=t(76627),p=t(49983),g=t(72458);function f(e,i){if(1&e&&(r.ynx(0),r.TgZ(1,"mat-option",20),r._uU(2),r.qZA(),r.BQk()),2&e){const e=i.$implicit;r.xp6(1),r.Q6J("value",e),r.xp6(1),r.Oqu(e.label)}}function h(e,i){1&e&&(r.TgZ(0,"span"),r._uU(1,"Debe ingresar este campo!!"),r.qZA())}function m(e,i){if(1&e&&(r.ynx(0),r.TgZ(1,"th",16),r._uU(2),r.qZA(),r.BQk()),2&e){const e=i.$implicit;r.xp6(2),r.hij(" ",e.label," ")}}const x=function(e,i){return{"bg-gray-500":e,"bg-white border-b hover:bg-gray-300":i}};function y(e,i){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"tr",21),r.TgZ(2,"td",22),r._uU(3),r.qZA(),r.TgZ(4,"td",23),r._uU(5),r.qZA(),r.TgZ(6,"td",23),r._uU(7),r.qZA(),r.TgZ(8,"td",23),r._uU(9),r.qZA(),r.TgZ(10,"td",23),r._uU(11),r.qZA(),r.TgZ(12,"td",23),r._uU(13),r.qZA(),r.TgZ(14,"td",23),r._uU(15),r.qZA(),r.TgZ(16,"td",23),r._uU(17),r.qZA(),r.TgZ(18,"td",23),r.TgZ(19,"div",24),r.TgZ(20,"button",25),r.NdJ("click",function(){const i=r.CHM(e).$implicit;return r.oxw().onSelectChange(i.node)}),r.TgZ(21,"mat-icon"),r._uU(22,"select_all"),r.qZA(),r.TgZ(23,"span",26),r._uU(24,"Seleccionar"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.BQk()}if(2&e){const e=i.$implicit,t=r.oxw();r.xp6(1),r.Q6J("ngClass",r.WLB(9,x,e.node.id==t.companyId,e.node.id!=t.companyId)),r.xp6(2),r.hij(" ",e.node.code," "),r.xp6(2),r.hij(" ",e.node.name," "),r.xp6(2),r.hij(" ",e.node.contact," "),r.xp6(2),r.hij(" ",e.node.position," "),r.xp6(2),r.hij(" ",e.node.email," "),r.xp6(2),r.hij(" ",e.node.phone_number," "),r.xp6(2),r.hij(" ",e.node.id_institution_type.edges.length>0?e.node.id_institution_type.edges[0].node.name:""," "),r.xp6(2),r.hij(" ",e.node.id_institution_clasification.edges.length>0?e.node.id_institution_clasification.edges[0].node.name:""," ")}}let w=(()=>{class e{constructor(e,i,t){var o;this.dialogRef=e,this.data=i,this.companyService=t,this.listRegistry=[],this.fields=[{label:"Codigo",field:"code",type:"field",searchable:!0,placeholder:"Codigo"},{label:"Nombre",field:"name",type:"field",searchable:!0,placeholder:"Nombre"},{label:"Contacto",field:"contact",type:"field",searchable:!0,placeholder:"Contacto"},{label:"Posicion",field:"position",type:"field",searchable:!0,placeholder:"Posicion"},{label:"Telefono",field:"phone_number",type:"field",searchable:!0,placeholder:"Telefono"},{label:"Correo",field:"email",type:"field",searchable:!0,placeholder:"Correo"},{label:"Tipo",field:"id_institution_type",type:"relation"},{label:"Clasificacion",field:"id_institution_clasification",type:"relation"}],this.companyId=null,this.company=null,this.isSelected=!1,this.searchForm=new n.cw({field:new n.NI(null===(o=this.fields[0])||void 0===o?void 0:o.field,[n.kI.minLength(1),n.kI.required]),value:new n.NI("",[n.kI.minLength(1),n.kI.required])}),null!=i.company&&(this.companyId=i.company),this.onLoadMainData()}onLoadMainData(){this.companyService.getCompanies("").subscribe(e=>{this.listRegistry=e.data.companies.edges})}onSearchMainData(){if(this.searchForm.valid){const e=this.companyService.buildQuery([this.searchForm.controls.field.value.field,this.searchForm.controls.value.value,this.searchForm.controls.field.value.type]);this.companyService.getCompanies(e).subscribe(e=>{this.listRegistry=e.data.companies.edges})}}onSelectChange(e){e.id===this.companyId?(this.isSelected=!1,this.companyId=null,this.company=null):(this.companyId=e.id,this.isSelected=!0,this.company=e)}onSaveSelection(){this.dialogRef.close({code:"onSaveSelection",company:this.company})}onCancelSelection(){this.dialogRef.close({code:"onSelectionCancel",company:this.company})}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(i){return new(i||e)(r.Y36(o.so),r.Y36(o.WI),r.Y36(s.J))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-select-company"]],decls:37,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"h-full","w-full","min-w-0","ng-star-inserted"],[1,"flex","flex-col","sm:flex-row","w-full","sm:max-w-none","mb-4",3,"formGroup"],["mat-stroked-button","",1,"h-full","mt-1","sm:mr-4",3,"click"],[1,"items-center","h-full"],[1,"fuse-mat-no-subscript","w-full","sm:w-1/5"],["formControlName","field"],[4,"ngFor","ngForOf"],[1,"fuse-mat-no-subscript","w-full","sm:w-3/6","mt-4","sm:mt-0","sm:ml-4",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["placeholder","Search by title or description","matInput","","formControlName","value"],[4,"ngIf"],["mat-stroked-button","",1,"h-full","mt-1","sm:ml-4",3,"click"],[1,"min-w-full","text-center"],[1,"border-b","bg-gray-800"],["scope","col",1,"text-sm","font-medium","text-white","px-6","py-4"],[1,"my-1"],["mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-button","",3,"click"],[3,"value"],[3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-900","font-light","whitespace-nowrap"],[1,"flex","items-center","w-full"],[1,"flex","flex-auto","items-center","justify-center","py-4","hover:bg-blue-500",3,"click"],[1,"ml-2"]],template:function(e,i){1&e&&(r.TgZ(0,"div"),r.TgZ(1,"h2",0),r._uU(2,"Seleccion de empresa:"),r.qZA(),r.TgZ(3,"div",1),r.ynx(4),r.TgZ(5,"div",2),r.TgZ(6,"form",3),r.TgZ(7,"button",4),r.NdJ("click",function(){return i.onLoadMainData()}),r.TgZ(8,"span",5),r.TgZ(9,"span"),r._uU(10,"Reset"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"mat-form-field",6),r.TgZ(12,"mat-select",7),r.YNc(13,f,3,2,"ng-container",8),r.qZA(),r.qZA(),r.TgZ(14,"mat-form-field",9),r._UZ(15,"mat-icon",10),r._UZ(16,"input",11),r.TgZ(17,"mat-error"),r.YNc(18,h,2,0,"span",12),r.qZA(),r.qZA(),r.TgZ(19,"button",13),r.NdJ("click",function(){return i.onSearchMainData()}),r.TgZ(20,"span",5),r.TgZ(21,"span"),r._uU(22,"Buscar"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.ynx(23),r.TgZ(24,"table",14),r.TgZ(25,"thead",15),r.TgZ(26,"tr"),r.YNc(27,m,3,1,"ng-container",8),r.TgZ(28,"th",16),r._uU(29," Acciones "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(30,"tbody"),r.YNc(31,y,25,12,"ng-container",8),r.qZA(),r.qZA(),r.BQk(),r.qZA(),r.BQk(),r.TgZ(32,"div",17),r.TgZ(33,"button",18),r.NdJ("click",function(){return i.onSaveSelection()}),r._uU(34," Save "),r.qZA(),r.TgZ(35,"button",19),r.NdJ("click",function(){return i.onCancelSelection()}),r._uU(36," Cancel "),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(6),r.Q6J("formGroup",i.searchForm),r.xp6(7),r.Q6J("ngForOf",i.fields),r.xp6(1),r.Q6J("floatLabel","always"),r.xp6(1),r.Q6J("svgIcon","heroicons_solid:search"),r.xp6(3),r.Q6J("ngIf",i.searchForm.get("value").hasError("required")&&i.searchForm.get("value").touched),r.xp6(9),r.Q6J("ngForOf",i.fields),r.xp6(4),r.Q6J("ngForOf",i.listRegistry),r.xp6(2),r.Q6J("disabled",!i.isSelected))},directives:[o.uh,o.xY,n._Y,n.JL,n.sg,l.lW,a.KE,c.gD,n.JJ,n.u,d.sg,u.Hw,a.qo,p.Nt,n.Fj,a.TO,d.O5,g.ey,d.mk],styles:[""]}),e})()},611:function(e,i,t){t.d(i,{A:function(){return b}});var n=t(22238),o=t(37716),r=t(19602),s=t(38583);function l(e,i){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",e[1],"")}}function a(e,i){if(1&e&&(o.ynx(0),o._uU(1),o.ALo(2,"date"),o.BQk()),2&e){const e=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",o.lcZ(2,1,e[1]),"")}}function c(e,i){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",e[1]," ")}}function d(e,i){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",e[1]?"Si":"No"," ")}}function u(e,i){if(1&e&&(o.ynx(0),o._uU(1),o._UZ(2,"br"),o.BQk()),2&e){const e=i.$implicit,t=o.oxw(3).index,n=o.oxw(2);o.xp6(1),o.hij(" ",e[n.fields[t][3]]," ")}}function p(e,i){if(1&e&&(o.ynx(0),o.YNc(1,u,3,1,"ng-container",6),o.BQk()),2&e){const e=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngForOf",e[1])}}function g(e,i){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const e=i.$implicit,t=o.oxw(3).$implicit;o.xp6(1),o.hij(" ",t[1][e]," ")}}function f(e,i){if(1&e&&(o.ynx(0),o.YNc(1,g,2,1,"ng-container",6),o.ALo(2,"slice"),o._UZ(3,"br"),o.BQk()),2&e){const e=o.oxw(2).index,i=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",o.xi3(2,1,i.fields[e],3))}}function h(e,i){if(1&e&&(o.ynx(0),o._uU(1),o._UZ(2,"br"),o.BQk()),2&e){const e=i.$implicit;o.xp6(1),o.lnq(" ",null==e?null:e.id_student[0].carnet," ",null==e?null:e.id_student[0].first_name," ",null==e?null:e.id_student[0].last_name," ")}}function m(e,i){if(1&e&&(o.ynx(0),o.YNc(1,h,3,3,"ng-container",6),o.BQk()),2&e){const e=o.oxw(3).$implicit;o.xp6(1),o.Q6J("ngForOf",e[1])}}function x(e,i){if(1&e&&(o.ynx(0),o.YNc(1,m,2,1,"ng-container",5),o.BQk()),2&e){const e=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngIf",null!=e[1])}}function y(e,i){if(1&e&&(o.TgZ(0,"div",8),o.TgZ(1,"div",9),o._uU(2),o.qZA(),o.TgZ(3,"div",10),o.ynx(4,11),o.YNc(5,l,2,1,"ng-container",12),o.YNc(6,a,3,3,"ng-container",12),o.YNc(7,c,2,1,"ng-container",12),o.YNc(8,d,2,1,"ng-container",12),o.YNc(9,p,2,1,"ng-container",12),o.YNc(10,f,4,4,"ng-container",12),o.YNc(11,x,2,1,"ng-container",12),o.BQk(),o.qZA(),o.qZA()),2&e){const e=o.oxw().index,i=o.oxw(2);o.xp6(2),o.hij(" ",i.fields[e][0]," "),o.xp6(2),o.Q6J("ngSwitch",i.fields[e][1]),o.xp6(1),o.Q6J("ngSwitchCase","number"),o.xp6(1),o.Q6J("ngSwitchCase","date"),o.xp6(1),o.Q6J("ngSwitchCase","string"),o.xp6(1),o.Q6J("ngSwitchCase","bool"),o.xp6(1),o.Q6J("ngSwitchCase","array"),o.xp6(1),o.Q6J("ngSwitchCase","object"),o.xp6(1),o.Q6J("ngSwitchCase","aplication")}}function w(e,i){if(1&e&&(o.ynx(0),o.YNc(1,y,12,9,"div",7),o.BQk()),2&e){const e=i.index,t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",t.fields[e][2])}}function Z(e,i){if(1&e&&(o.ynx(0),o.YNc(1,w,2,1,"ng-container",6),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.row)}}let b=(()=>{class e{constructor(e,i){this.dialogRef=e,this.data=i,this.row=[],this.fields=[],this.fields=i.fields,this.row=Object.entries(i.row)}onShowLaber(e){const i=this.fields.filter(i=>i.field==e);return i.length>0?i[0].label:"No label"}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)(o.Y36(n.so),o.Y36(n.WI))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-show-details"]],decls:7,vars:1,consts:[[1,"w-full","flex","flex-col","items-center"],[1,"customScroll","flex-col","lg:flex-row","w-full","overflow-x-auto"],[1,"grid","grid-flow-col","lg:grid-flow-row","min-w-max","lg:min-w-0","divide-x","lg:divide-x-0","lg:divide-y"],[1,"hidden","lg:block","p-4","col-span-full","bg-gray-100","dark:bg-transparent"],[1,"text-md","font-semibold"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","grid grid-flow-row auto-rows-fr lg:grid-flow-col lg:auto-cols-fr divide-y lg:divide-y-0 lg:divide-x",4,"ngIf"],[1,"grid","grid-flow-row","auto-rows-fr","lg:grid-flow-col","lg:auto-cols-fr","divide-y","lg:divide-y-0","lg:divide-x"],[1,"flex","items-center","lg:items-start","max-w-24","lg:max-w-none","p-4","font-medium","lg:font-normal","text-center","lg:text-left"],[1,"flex","items-center","justify-center","lg:justify-start","py-4","px-2"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"fuse-card",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o._uU(5," Informacion completa del registro "),o.qZA(),o.qZA(),o.YNc(6,Z,2,1,"ng-container",5),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(6),o.Q6J("ngIf",i.row.length>0))},directives:[r.y,s.O5,s.sg,s.RF,s.n9],pipes:[s.uU,s.OU],styles:[".customScroll[_ngcontent-%COMP%]{overflow-y:scroll;max-width:500px;min-width:500px;width:500px;max-height:750px}"]}),e})()},53817:function(e,i,t){t.d(i,{J:function(){return p}});var n=t(50752),o=t(59193),r=t(94402),s=t(40205),l=t(15257),a=t(5304),c=t(37716),d=t(94270),u=t(1400);let p=(()=>{class e{constructor(e,i,t){this.apollo=e,this.supaBaseService=i,this._fuseConfirmationService=t,this.table="company"}getCompanies(e){return this.apollo.watchQuery({query:n.Ps`
          query listCompanies {
            companies${e} {
              pageInfo {
                hasNextPage
                hasPreviousPage
              }
              edges {
                node {
                  id
                  name
                  code
                  contact
                  position
                  email
                  phone_number
                  id_institution_type {
                    edges {
                      node {
                        id
                        name
                      }
                    }
                  }
                  id_institution_clasification {
                    edges {
                      node {
                        id
                        name
                      }
                    }
                  }
                }
              }
              count
            }
          }
        `,fetchPolicy:"network-only"}).valueChanges.pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),o.E)))}get(e=[],i=0,t=100){return(0,r.D)(this.supaBaseService.onSelectRequest(this.table,i,t,"\n    *, \n    id_institution_type!inner(*), \n    id_institution_clasification!inner(*)\n    ",e)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),o.E)))}getClasificationCompany(e=[],i=0,t=100){return(0,r.D)(this.supaBaseService.onSelectRequest("institution_clasification",i,t,"\n    *\n    ",e)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),o.E)))}getTypesCompany(e=[],i=0,t=100){return(0,r.D)(this.supaBaseService.onSelectRequest("institution_type",i,t,"\n    *\n    ",e)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),o.E)))}insert(e){return(0,r.D)(this.supaBaseService.onInsertRequest(this.table,e)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),o.E)))}update(e,i){return(0,r.D)(this.supaBaseService.onUpdateRequest(this.table,i,e)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),o.E)))}delete(e){return(0,r.D)(this.supaBaseService.onDeleteRequest(this.table,e)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),o.E)))}buildQuery(e){let i=[];for(let t=0;t<e.length;t+=3)i.push("relation"==e[t+2]?`${e[t]}:{have:{name:{matchesRegex:"${e[t+1]}"}}}`:`${e[t]}:{matchesRegex:"${e[t+1]}"}`);return`(where:{${i.toString()}})`}onSuccessDialog(e){this._fuseConfirmationService.open({title:"Alerta",message:`Se ${e} el registro correctamente.`,icon:{show:!0,name:"heroicons_outline:badge-check",color:"success"},actions:{confirm:{show:!1,label:"Si",color:"primary"},cancel:{show:!1,label:"No"}},dismissible:!0})}errorHandle(e){return this._fuseConfirmationService.open({title:"Error",message:"Error insperado!!!",icon:{show:!0,name:"heroicons_outline:exclamation",color:"error"},actions:{confirm:{show:!1,label:"string",color:"primary"},cancel:{show:!1,label:"string"}},dismissible:!0}),(0,s._)("error")}}return e.\u0275fac=function(i){return new(i||e)(c.LFG(n._M),c.LFG(d.P),c.LFG(u.R))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},28456:function(e,i,t){t.d(i,{q:function(){return p}});var n=t(50752),o=t(94402),r=t(59193),s=t(40205),l=t(15257),a=t(5304),c=t(37716),d=t(94270),u=t(1400);let p=(()=>{class e{constructor(e,i,t){this.apollo=e,this.supaBaseService=i,this._fuseConfirmationService=t,this.table="degree"}get(e="*",i=null,t=null){return(0,o.D)(this.supaBaseService.onSelectRequest(this.table)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),r.E)))}insert(e){return(0,o.D)(this.supaBaseService.onInsertRequest(this.table,{name:e})).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),r.E)))}update(e,i){return(0,o.D)(this.supaBaseService.onUpdateRequest(this.table,{name:i},e)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),r.E)))}delete(e){return(0,o.D)(this.supaBaseService.onDeleteRequest(this.table,e)).pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),r.E)))}getDegrees(e){return this.apollo.watchQuery({query:n.Ps`
          query listDegrees {
            degrees {
              pageInfo {
                hasNextPage
                hasPreviousPage
              }
              edges {
                node {
                  id
                  name
                }
              }
              count
            }
          }
        `,fetchPolicy:"network-only"}).valueChanges.pipe((0,l.q)(1),(0,a.K)((e,i)=>(this.errorHandle(e),r.E)))}onSuccessDialog(e){this._fuseConfirmationService.open({title:"Alerta",message:`Se ${e} el registro correctamente.`,icon:{show:!0,name:"heroicons_outline:badge-check",color:"success"},actions:{confirm:{show:!1,label:"Si",color:"primary"},cancel:{show:!1,label:"No"}},dismissible:!0})}errorHandle(e){return this._fuseConfirmationService.open({title:"Error",message:"Error insperado!!!",icon:{show:!0,name:"heroicons_outline:exclamation",color:"error"},actions:{confirm:{show:!1,label:"string",color:"primary"},cancel:{show:!1,label:"string"}},dismissible:!0}),(0,s._)("error")}}return e.\u0275fac=function(i){return new(i||e)(c.LFG(n._M),c.LFG(d.P),c.LFG(u.R))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);