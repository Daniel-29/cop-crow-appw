"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[8643],{36063:function(e,t,i){i.d(t,{$o:function(){return d},t7:function(){return c}});var r=i(37716),a=i(72458),n=i(16738);const o=i.n(n)()||n,l=new r.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function s(e,t){const i=Array(e);for(let r=0;r<e;r++)i[r]=t(r);return i}let c=(()=>{class e extends a._A{constructor(e,t){super(),this._options=t,this.setLocale(e||o.locale())}setLocale(e){super.setLocale(e);let t=o.localeData(e);this._localeData={firstDayOfWeek:t.firstDayOfWeek(),longMonths:t.months(),shortMonths:t.monthsShort(),dates:s(31,e=>this.createDate(2017,0,e+1).format("D")),longDaysOfWeek:t.weekdays(),shortDaysOfWeek:t.weekdaysShort(),narrowDaysOfWeek:t.weekdaysMin()}}getYear(e){return this.clone(e).year()}getMonth(e){return this.clone(e).month()}getDate(e){return this.clone(e).date()}getDayOfWeek(e){return this.clone(e).day()}getMonthNames(e){return"long"==e?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(e){return"long"==e?this._localeData.longDaysOfWeek:"short"==e?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(e){return this.clone(e).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(e){return this.clone(e).daysInMonth()}clone(e){return e.clone().locale(this.locale)}createDate(e,t,i){const r=this._createMoment({year:e,month:t,date:i}).locale(this.locale);return r.isValid(),r}today(){return this._createMoment().locale(this.locale)}parse(e,t){return e&&"string"==typeof e?this._createMoment(e,t,this.locale):e?this._createMoment(e).locale(this.locale):null}format(e,t){return e=this.clone(e),this.isValid(e),e.format(t)}addCalendarYears(e,t){return this.clone(e).add({years:t})}addCalendarMonths(e,t){return this.clone(e).add({months:t})}addCalendarDays(e,t){return this.clone(e).add({days:t})}toIso8601(e){return this.clone(e).format()}deserialize(e){let t;if(e instanceof Date)t=this._createMoment(e).locale(this.locale);else if(this.isDateInstance(e))return this.clone(e);if("string"==typeof e){if(!e)return null;t=this._createMoment(e,o.ISO_8601).locale(this.locale)}return t&&this.isValid(t)?this._createMoment(t).locale(this.locale):super.deserialize(e)}isDateInstance(e){return o.isMoment(e)}isValid(e){return this.clone(e).isValid()}invalid(){return o.invalid()}_createMoment(e,t,i){const{strict:r,useUtc:a}=this._options||{};return a?o.utc(e,t,i,r):o(e,t,i,r)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a.Ad,8),r.LFG(l,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const d={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}},18643:function(e,t,i){i.r(t),i.d(t,{AgreementsModule:function(){return ee}});var r=i(38583),a=i(3679),n=i(16738),o=i.n(n),l=i(37716),s=i(32489),c=i(1400),d=i(53817),u=i(50752),g=i(94402),m=i(40205),p=i(59193),h=i(15257),f=i(93342),Z=i(5304),_=i(94270);let b=(()=>{class e{constructor(e,t,i){this.apollo=e,this.supaBaseService=t,this._fuseConfirmationService=i,this.table="agreement",this.tableOtM="category"}get(e=[],t=0,i=100){return(0,g.D)(this.supaBaseService.onSelectRequest(this.table,t,i,"id,updated_at,created_at,date,letter_signature,director_signature,id_company!inner(*)",e)).pipe((0,h.q)(1),(0,f.b)(e=>{if(null!=e.error)throw(0,m._)(e.error)}),(0,Z.K)((e,t)=>(this.errorHandle(e),p.E)))}insert(e){return(0,g.D)(this.supaBaseService.onInsertRequest(this.table,e)).pipe((0,h.q)(1),(0,f.b)(e=>{if(null!=e.error)throw(0,m._)(e.error)}),(0,Z.K)((e,t)=>(this.errorHandle(e),p.E)))}update(e,t){return(0,g.D)(this.supaBaseService.onUpdateRequest(this.table,t,e)).pipe((0,h.q)(1),(0,f.b)(e=>{if(null!=e.error)throw(0,m._)(e.error)}),(0,Z.K)((e,t)=>(this.errorHandle(e),p.E)))}delete(e){return(0,g.D)(this.supaBaseService.onDeleteRequest(this.table,e)).pipe((0,h.q)(1),(0,f.b)(e=>{if(null!=e.error)throw(0,m._)(e.error)}),(0,Z.K)((e,t)=>(this.errorHandle(e),p.E)))}buildQuery(e){let t,i=[];for(let r=0;r<e.length;r+=3)if("relation"==e[r+2])i.push(`${e[r]}:{have:{name:{matchesRegex:"${e[r+1]}"}}}`);else if("code"==e[r+2])i.push(`${e[r]}:{have:{code:{matchesRegex:"${e[r+1]}"}}}`);else if("bool"==e[r+2])t="Si"==e[r+1],i.push(`${e[r]}:{equalTo:${t}}`);else if("number"==e[r+2])t="Si"==e[r+1],i.push(`${e[r]}:{equalTo:${e[r+1]}}`);else if("date"==e[r+2]){let t=new Date((e[r+1]+"T00:00:00").toString()),a=new Date((e[r+1]+"T23:59:59").toString());i.push(`${e[r]}:{greaterThanOrEqualTo:"${t.toISOString()}", lessThanOrEqualTo:"${a.toISOString()}" }`)}else i.push(`${e[r]}:{matchesRegex:"${e[r+1]}"}`);return`(where:{${i.toString()}})`}getAgreements(e){return this.apollo.watchQuery({query:u.Ps`
          query listAgreements{
            agreements${e}  {
              pageInfo {
                hasNextPage
                hasPreviousPage
              }
              edges {
                node {
                  id
                  date
                  letter_signature
                  director_signature
                  id_company {
                    edges {
                      node {
                        id
                        code
                        name
                      }
                    }
                  }
                }
              }
              count
            }
          }
        `,fetchPolicy:"network-only"}).valueChanges.pipe((0,h.q)(1),(0,Z.K)((e,t)=>(this.errorHandle(e),p.E)))}onCreateAgreement(e,t,i,r){return this.apollo.mutate({mutation:u.Ps`
          mutation createAgreement(
            $id_company: CompanyRelationInput!
            $date: Date!
            $letter_signature: Boolean!
            $director_signature: Boolean!
          ) {
            createAgreement(
              input: {
                fields: {
                  id_company: $id_company
                  date: $date
                  letter_signature: $letter_signature
                  director_signature: $director_signature
                }
              }
            ) {
              agreement {
                id
              }
            }
          }
        `,variables:{id_company:{add:e},date:t,letter_signature:i,director_signature:r}}).pipe((0,h.q)(1),(0,Z.K)((e,t)=>(this.errorHandle(e),p.E)))}onEditAgreement(e,t,i,r,a){return this.apollo.mutate({mutation:u.Ps`
          mutation updateAgreement(
            $id: ID!
            $id_company: CompanyRelationInput!
            $date: Date!
            $letter_signature: Boolean!
            $director_signature: Boolean!
          ) {
            updateAgreement(
              input: {
                id: $id
                fields: {
                  id_company: $id_company
                  date: $date
                  letter_signature: $letter_signature
                  director_signature: $director_signature
                }
              }
            ) {
              agreement {
                id
              }
            }
          }
        `,variables:{id:e,id_company:{add:t},date:i,letter_signature:r,director_signature:a}}).pipe((0,h.q)(1),(0,Z.K)((e,t)=>(this.errorHandle(e),p.E)))}onDeleteAgreement(e){return this.apollo.mutate({mutation:u.Ps`
          mutation deleteAgreement($id: ID!) {
            deleteAgreement(input: { id: $id }) {
              agreement {
                id
              }
            }
          }
        `,variables:{id:e}}).pipe((0,h.q)(1),(0,Z.K)((e,t)=>(this.errorHandle(e),p.E)))}onSuccessDialog(e){this._fuseConfirmationService.open({title:"Alerta",message:`Se ${e} el registro correctamente.`,icon:{show:!0,name:"heroicons_outline:badge-check",color:"success"},actions:{confirm:{show:!1,label:"Si",color:"primary"},cancel:{show:!1,label:"No"}},dismissible:!0})}errorHandle(e){return this._fuseConfirmationService.open({title:"Error",message:"Error insperado!!!",icon:{show:!0,name:"heroicons_outline:exclamation",color:"error"},actions:{confirm:{show:!1,label:"string",color:"primary"},cancel:{show:!1,label:"string"}},dismissible:!0}),(0,m._)("error")}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(u._M),l.LFG(_.P),l.LFG(c.R))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=i(26927),q=i(1769),v=i(98295),A=i(86640),w=i(49983),x=i(43220),T=i(76627),k=i(45396),D=i(51095),S=i(65939),I=i(67441),U=i(99692),N=i(72458);function F(e,t){if(1&e&&(l.TgZ(0,"div",67),l.TgZ(1,"div",68),l.TgZ(2,"div",69),l.TgZ(3,"h5",70),l._uU(4),l.qZA(),l.TgZ(5,"p",71),l._uU(6),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=t.item,i=t.searchTerm;l.xp6(3),l.Q6J("ngOptionHighlight",i),l.xp6(1),l.AsE(" ",e.code," - ",e.name," "),l.xp6(2),l.HOy(" ",e.id_institution_clasification.name,"- ",e.id_institution_type.name,"- ",e.phone_number," ",e.email," ")}}function M(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1,"Debe ingresar este campo!!"),l.qZA())}function J(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"mat-option",72),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("value",e),l.xp6(1),l.Oqu(e.label)}}function C(e,t){if(1&e&&(l.ynx(0),l.YNc(1,J,3,2,"div",25),l.BQk()),2&e){const e=t.$implicit;l.xp6(1),l.Q6J("ngIf",1==e.searchable)}}function $(e,t){1&e&&l._UZ(0,"div")}function L(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1,"Debe ingresar este campo!!"),l.qZA())}function O(e,t){if(1&e&&(l.TgZ(0,"mat-form-field",73),l._UZ(1,"mat-icon",74),l._UZ(2,"input",75),l._UZ(3,"mat-datepicker-toggle",22),l._UZ(4,"mat-datepicker",null,76),l.TgZ(6,"mat-error"),l.YNc(7,L,2,0,"span",25),l.qZA(),l.qZA()),2&e){const e=l.MAs(5),t=l.oxw();l.Q6J("floatLabel","always"),l.xp6(1),l.Q6J("svgIcon","heroicons_solid:search"),l.xp6(1),l.Q6J("matDatepicker",e)("placeholder",t.Desde),l.xp6(1),l.Q6J("for",e),l.xp6(4),l.Q6J("ngIf",t.searchForm.get("value").hasError("required")&&t.searchForm.get("value").touched)}}function E(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1,"Debe ingresar este campo!!"),l.qZA())}function Q(e,t){if(1&e&&(l.TgZ(0,"mat-form-field",73),l._UZ(1,"mat-icon",74),l._UZ(2,"input",77),l.TgZ(3,"mat-error"),l.YNc(4,E,2,0,"span",25),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.Q6J("floatLabel","always"),l.xp6(1),l.Q6J("svgIcon","heroicons_solid:search"),l.xp6(3),l.Q6J("ngIf",e.searchForm.get("value").hasError("required")&&e.searchForm.get("value").touched)}}function R(e,t){if(1&e&&(l.ynx(0),l.TgZ(1,"th",54),l._uU(2),l.qZA(),l.BQk()),2&e){const e=t.$implicit;l.xp6(2),l.hij(" ",e.label," ")}}function Y(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"tr",78),l.TgZ(1,"td",79),l._uU(2),l.qZA(),l.TgZ(3,"td",80),l._uU(4),l.qZA(),l.TgZ(5,"td",80),l._uU(6),l.ALo(7,"date"),l.qZA(),l.TgZ(8,"td",80),l._uU(9),l.qZA(),l.TgZ(10,"td",80),l._uU(11),l.qZA(),l.TgZ(12,"td",80),l.TgZ(13,"div",81),l.TgZ(14,"button",82),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().toggleDrawerOpen("leftDrawer",t)}),l.TgZ(15,"mat-icon",83),l.O4$(),l.TgZ(16,"svg",84),l._UZ(17,"path",85),l.qZA(),l.qZA(),l.kcU(),l.TgZ(18,"span",86),l._uU(19,"Editar"),l.qZA(),l.qZA(),l.TgZ(20,"button",87),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().onDeleteRegistry(t.id)}),l.TgZ(21,"mat-icon",88),l.O4$(),l.TgZ(22,"svg",84),l._UZ(23,"path",89),l.qZA(),l.qZA(),l.kcU(),l.TgZ(24,"span",86),l._uU(25,"Eliminar"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(2),l.hij(" ",e.id_company.code," "),l.xp6(2),l.hij(" ",e.id_company.name," "),l.xp6(2),l.hij(" ",l.xi3(7,5,e.date,"yyyy-MM-dd")," "),l.xp6(3),l.hij(" ",e.director_signature?"Si requiere":"No requiere"," "),l.xp6(2),l.hij(" ",e.letter_signature?"Firmado":"Sin firmar"," ")}}function H(e,t){if(1&e&&(l.TgZ(0,"div",67),l.TgZ(1,"div",68),l.TgZ(2,"div",69),l.TgZ(3,"h5",70),l._uU(4),l.qZA(),l.TgZ(5,"p",71),l._uU(6),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=t.item,i=t.searchTerm;l.xp6(3),l.Q6J("ngOptionHighlight",i),l.xp6(1),l.AsE(" ",e.code," - ",e.name," "),l.xp6(2),l.HOy(" ",e.id_institution_clasification.name,"- ",e.id_institution_type.name,"- ",e.phone_number," ",e.email," ")}}function B(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1,"Debe ingresar este campo!!"),l.qZA())}const z=o()||n;let P=(()=>{class e{constructor(e,t,i,r){this._fuseDrawerService=e,this._fuseConfirmationService=t,this.companyService=i,this.agreementsService=r,this.fields=[{label:"Codigo",field:"id_company",type:"ilike",subfield:"code",searchable:!0,placeholder:"Nombre del programa",icon:"office-building"},{label:"Empresa",field:"id_company",type:"ilike",subfield:"name",searchable:!0,placeholder:"Nombre de la empresa",icon:"office-building"},{label:"Fecha",field:"date",type:"date",subfield:null,searchable:!0,placeholder:"Fecha"},{label:"Requiere firma del rector (Si/NO)",field:"director_signature",type:"ilike",subfield:null,searchable:!1,placeholder:"Firma rector",icon:"office-building"},{label:"Carta/ convenio firmado",field:"letter_signature",type:"ilike",subfield:null,searchable:!1,placeholder:"Firma carta",icon:"office-building"}],this.listRegistry=[],this.listCompany=[],this.newForm=new a.cw({date:new a.NI(z(new Date),[a.kI.minLength(3),a.kI.required]),id_company:new a.NI(null,[a.kI.minLength(3),a.kI.required]),director_signature:new a.NI(!1,[a.kI.minLength(3),a.kI.required]),letter_signature:new a.NI(!1,[a.kI.minLength(3),a.kI.required])}),this.searchForm=new a.cw({field:new a.NI(this.fields[0],[a.kI.minLength(1),a.kI.required]),value:new a.NI("",[a.kI.minLength(1),a.kI.required])}),this.editForm=new a.cw({id:new a.NI("",[a.kI.minLength(3),a.kI.required]),date:new a.NI(z(new Date),[a.kI.minLength(3),a.kI.required]),id_company:new a.NI(null,[a.kI.minLength(3),a.kI.required]),director_signature:new a.NI(!1,[a.kI.minLength(3),a.kI.required]),letter_signature:new a.NI(!1,[a.kI.minLength(3),a.kI.required])}),this.pagination={length:100,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,50,100],showFirstLastButtons:!1},this.onLoadMainData(),this.onLoadCompanies(null)}handlePageEvent(e){this.pagination.length=e.length,this.pagination.pageSize=e.pageSize,this.pagination.pageIndex=e.pageIndex,this.onLoadMainData()}onLoadMainData(){this.agreementsService.get([],this.pagination.pageSize*this.pagination.pageIndex,this.pagination.pageSize).subscribe(e=>{this.listRegistry=e.data})}onSearchMainData(){this.searchForm.valid&&this.agreementsService.get([{field:this.searchForm.controls.field.value.field,value:this.searchForm.controls.value.value,type:this.searchForm.controls.field.value.type,subfield:this.searchForm.controls.field.value.subfield}],this.pagination.pageSize*this.pagination.pageIndex,this.pagination.pageSize).subscribe(e=>{this.listRegistry=e.data})}onLoadCompanies(e){if(null!=e){const t=e.term.split(" "),i={field:"name",value:null!=t[1]?t[1]:"",type:"",subfield:null};t.push({field:"code",value:null!=t[0]?t[0]:"",type:"",subfield:null}),t.push(i)}this.companyService.get([]).subscribe(e=>{this.listCompany=e.data})}ngOnInit(){}onEditRegistry(){if(this.editForm.valid){const e=this.editForm.getRawValue(),t=e.id;delete e.id,this.agreementsService.update(t,e).subscribe(e=>{this.agreementsService.onSuccessDialog("actualizo"),this.onLoadMainData()})}}onNewRegistry(){this.newForm.valid&&this.agreementsService.insert(this.newForm.getRawValue()).subscribe(e=>{this.agreementsService.onSuccessDialog("creo"),this.newForm.reset(),this.newForm.controls.director_signature.setValue(!1),this.newForm.controls.letter_signature.setValue(!1),this.onLoadMainData()})}onDeleteRegistry(e){this._fuseConfirmationService.open({title:"Alerta",message:"Desea eliminar este registro?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{show:!0,label:"Si",color:"primary"},cancel:{show:!0,label:"No"}},dismissible:!1}).afterClosed().subscribe(t=>{"confirmed"==t&&this.agreementsService.delete(e).subscribe(e=>{this.onLoadMainData()})})}toggleDrawerOpen(e,t){t&&(this.editForm.controls.id.setValue(t.id),this.editForm.controls.id_company.setValue(t.id_company.id),this.editForm.controls.date.setValue(t.date),this.editForm.controls.letter_signature.setValue(t.letter_signature),this.editForm.controls.director_signature.setValue(t.director_signature)),this._fuseDrawerService.getComponent(e).toggle()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(s._),l.Y36(c.R),l.Y36(d.J),l.Y36(b))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-agreements"]],decls:131,vars:47,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex-auto","pt-6","sm:px-4","sm:pb-4","relative","flex","overflow-hidden"],[1,"w-3/5","make-drawer-content-scrollable",3,"name","opened","mode"],[1,"flex","justify-center","h-400","min-h-400","max-h-400","border-2","border-dashed","border-gray-300","p-6"],[1,"ng-untouched","ng-pristine","ng-valid",3,"formGroup"],[1,"flex","flex-col","mt-2","bg-card","shadow","rounded"],[1,"p-8","bg-gray-50","dark:bg-gray-700"],[1,"text-lg","font-medium"],[1,"text-secondary"],["role","separator","aria-orientation","horizontal",1,"mat-divider","mat-divider-horizontal"],[1,"mt-4","p-2","pb-2"],[1,""],["appearance","outline","bindLabel","name","bindValue","id","formControlName","id_company",1,"mt-2",3,"items","multiple","closeOnSelect","hideSelected","placeholder","search"],["ng-option-tmp",""],[1,"fuse-mat-no-subscript","w-full"],["matInput","","formControlName","date",3,"matDatepicker","placeholder"],["matSuffix","",3,"for"],["dpEdit",""],["matPrefix","",1,"icon-size-5"],[4,"ngIf"],[1,"flex","items-center","justify-between"],[1,"flex-auto","leading-6","cursor-pointer",3,"click"],["formControlName","director_signature",1,"ml-2",3,"color"],["directorSignature",""],["formControlName","letter_signature",1,"ml-2",3,"color"],["letterSignature",""],[1,"flex","items-center","justify-end","mt-10"],["mat-button","",1,"mat-focus-indicator","mat-button","mat-button-base",3,"click"],[1,"mat-button-wrapper"],["matripple","","ng-reflect-disabled","false","ng-reflect-centered","false","ng-reflect-trigger","[object HTMLButtonElement]",1,"mat-ripple","mat-button-ripple"],[1,"mat-button-focus-overlay"],["mat-flat-button","","ng-reflect-color","primary",1,"mat-focus-indicator","px-6","ml-3","mat-flat-button","mat-button-base","mat-primary"],["type","submit",1,"mat-button-wrapper",3,"click"],[1,"w-full","h-full",3,"animationDuration"],["label","Ver registros"],[1,"h-full","w-full","min-w-0","ng-star-inserted"],[1,"flex","flex-col","sm:flex-row","w-full","sm:max-w-none","mb-4",3,"formGroup"],["mat-stroked-button","",1,"h-full","mt-1","sm:mr-4",3,"click"],[1,"items-center","h-full"],[1,"fuse-mat-no-subscript","w-full","sm:w-1/5"],["formControlName","field"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],["mat-stroked-button","",1,"h-full","mt-1","sm:ml-4",3,"click"],[1,"min-w-full","text-center"],[1,"border-b","bg-gray-800"],["scope","col",1,"text-sm","font-medium","text-white","px-6","py-4"],["class","bg-white border-b hover:bg-gray-300",4,"ngFor","ngForOf"],[1,"mt-14"],["aria-label","Select page",1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex","page"],["label","Agregar"],[1,"px-4","w-full","border-2","border-dashed","border-gray-300","rounded-2xl"],[1,"flex","flex-col","mt-8","bg-card","shadow","rounded","overflow-hidden"],[1,"mt-8","p-8","pb-4"],["dpNew",""],["director_signature",""],["letter_signature",""],["mat-flat-button","","ng-reflect-color","primary",1,"mat-focus-indicator","px-6","ml-3","mat-flat-button","mat-button-base","mat-primary",3,"click"],["type","none",1,"mat-button-wrapper"],[1,"my-2","py-4","px-5","rounded-lg","bg-gray-200","dark:bg-gray-800"],[1,"card"],[1,"card-body"],[1,"card-title","text-2xl","font-semibold","leading-tight",3,"ngOptionHighlight"],[1,"card-text"],[3,"value"],[1,"fuse-mat-no-subscript","w-full","sm:w-3/6","mt-4","sm:mt-0","sm:ml-4",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","formControlName","value",3,"matDatepicker","placeholder"],["editDate",""],["placeholder","Search by title or description","matInput","","formControlName","value"],[1,"bg-white","border-b","hover:bg-gray-300"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-900","font-light","whitespace-nowrap"],[1,"flex","items-center","w-full"],[1,"flex","flex-auto","items-center","justify-center","py-4","hover:bg-amber-500",3,"click"],["role","img","aria-hidden","true","data-mat-icon-type","svg","data-mat-icon-name","mail","data-mat-icon-namespace","heroicons_solid",1,"mat-icon","notranslate","icon-size-5","mat-icon-no-color"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"ml-2"],[1,"flex","flex-auto","items-center","justify-center","py-4","hover:bg-red-500",3,"click"],["role","img","aria-hidden","true","data-mat-icon-type","svg","data-mat-icon-name","phone","data-mat-icon-namespace","heroicons_solid",1,"mat-icon","notranslate","icon-size-5","mat-icon-no-color"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div"),l.TgZ(5,"a",4),l._uU(6,"Empleabilidad"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"h2",6),l._uU(9," Administracion de convenios "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",7),l.TgZ(11,"fuse-drawer",8),l.TgZ(12,"div",9),l.TgZ(13,"form",10),l.TgZ(14,"div",11),l.TgZ(15,"div",12),l.TgZ(16,"p",13),l._uU(17," Formulario de modificacion de convenio "),l.qZA(),l.TgZ(18,"p",14),l._uU(19,"Rellene los campos a continuacion."),l.qZA(),l.qZA(),l._UZ(20,"mat-divider",15),l.TgZ(21,"div",16),l.TgZ(22,"div",17),l.TgZ(23,"mat-label"),l._uU(24),l.qZA(),l.TgZ(25,"ng-select",18),l.NdJ("search",function(e){return t.onLoadCompanies(e)}),l.YNc(26,F,7,7,"ng-template",19),l.qZA(),l.TgZ(27,"mat-form-field",20),l.TgZ(28,"mat-label"),l._uU(29),l.qZA(),l._UZ(30,"input",21),l._UZ(31,"mat-datepicker-toggle",22),l._UZ(32,"mat-datepicker",null,23),l._UZ(34,"mat-icon",24),l.qZA(),l.YNc(35,M,2,0,"mat-error",25),l.TgZ(36,"div",26),l.TgZ(37,"div",27),l.NdJ("click",function(){return l.CHM(e),l.MAs(40).toggle()}),l._uU(38),l.qZA(),l._UZ(39,"mat-slide-toggle",28,29),l.qZA(),l.TgZ(41,"div",26),l.TgZ(42,"div",27),l.NdJ("click",function(){return l.CHM(e),l.MAs(45).toggle()}),l._uU(43),l.qZA(),l._UZ(44,"mat-slide-toggle",30,31),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(46,"div",32),l.TgZ(47,"button",33),l.NdJ("click",function(){return t.toggleDrawerOpen("leftDrawer")}),l.TgZ(48,"span",34),l._uU(49," Cancelar "),l.qZA(),l._UZ(50,"span",35),l._UZ(51,"span",36),l.qZA(),l.TgZ(52,"button",37),l.TgZ(53,"button",38),l.NdJ("click",function(){return t.onEditRegistry(),t.toggleDrawerOpen("leftDrawer")}),l._uU(54," Guardar"),l.qZA(),l._UZ(55,"span",35),l._UZ(56,"span",36),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(57,"mat-tab-group",39),l.TgZ(58,"mat-tab",40),l.TgZ(59,"div",41),l.TgZ(60,"form",42),l.TgZ(61,"button",43),l.NdJ("click",function(){return t.onLoadMainData()}),l.TgZ(62,"span",44),l.TgZ(63,"span"),l._uU(64,"Reset"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(65,"mat-form-field",45),l.TgZ(66,"mat-select",46),l.YNc(67,C,2,1,"ng-container",47),l.qZA(),l.qZA(),l.YNc(68,$,1,0,"div",48),l.YNc(69,O,8,6,"ng-template",null,49,l.W1O),l.YNc(71,Q,5,3,"ng-template",null,50,l.W1O),l.TgZ(73,"button",51),l.NdJ("click",function(){return t.onSearchMainData()}),l.TgZ(74,"span",44),l.TgZ(75,"span"),l._uU(76,"Buscar"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.ynx(77),l.TgZ(78,"table",52),l.TgZ(79,"thead",53),l.TgZ(80,"tr"),l.YNc(81,R,3,1,"ng-container",47),l.TgZ(82,"th",54),l._uU(83," Acciones "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(84,"tbody"),l.YNc(85,Y,26,8,"tr",55),l.qZA(),l.qZA(),l.TgZ(86,"div",56),l.TgZ(87,"mat-paginator",57),l.NdJ("page",function(e){return t.handlePageEvent(e)}),l.qZA(),l.qZA(),l.BQk(),l.qZA(),l.qZA(),l.TgZ(88,"mat-tab",58),l.TgZ(89,"div",59),l.TgZ(90,"form",10),l.TgZ(91,"div",60),l.TgZ(92,"div",12),l.TgZ(93,"p",13),l._uU(94," Formulario de registro de convenios "),l.qZA(),l.TgZ(95,"p",14),l._uU(96,"Rellene los campos a continuacion."),l.qZA(),l.qZA(),l._UZ(97,"mat-divider",15),l.TgZ(98,"div",61),l.ynx(99),l.TgZ(100,"ng-select",18),l.NdJ("search",function(e){return t.onLoadCompanies(e)}),l.YNc(101,H,7,7,"ng-template",19),l.qZA(),l.TgZ(102,"mat-form-field",20),l.TgZ(103,"mat-label"),l._uU(104),l.qZA(),l._UZ(105,"input",21),l._UZ(106,"mat-datepicker-toggle",22),l._UZ(107,"mat-datepicker",null,62),l.qZA(),l.YNc(109,B,2,0,"mat-error",25),l.TgZ(110,"div",26),l.TgZ(111,"div",27),l.NdJ("click",function(){return l.CHM(e),l.MAs(114).toggle()}),l._uU(112),l.qZA(),l._UZ(113,"mat-slide-toggle",28,63),l.qZA(),l.TgZ(115,"div",26),l.TgZ(116,"div",27),l.NdJ("click",function(){return l.CHM(e),l.MAs(119).toggle()}),l._uU(117),l.qZA(),l._UZ(118,"mat-slide-toggle",30,64),l.qZA(),l.BQk(),l.qZA(),l.qZA(),l.TgZ(120,"div",32),l.TgZ(121,"button",33),l.NdJ("click",function(){return t.newForm.reset()}),l.TgZ(122,"span",34),l._uU(123," Cancelar "),l.qZA(),l._UZ(124,"span",35),l._UZ(125,"span",36),l.qZA(),l.TgZ(126,"button",65),l.NdJ("click",function(){return t.onNewRegistry()}),l.TgZ(127,"span",66),l._uU(128,"Agregar"),l.qZA(),l._UZ(129,"span",35),l._UZ(130,"span",36),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.MAs(33),i=l.MAs(70),r=l.MAs(72),a=l.MAs(108);l.xp6(11),l.Q6J("name","leftDrawer")("opened",!1)("mode","side"),l.xp6(2),l.Q6J("formGroup",t.editForm),l.xp6(11),l.hij("",null==t.fields[7]?null:t.fields[7].label,":"),l.xp6(1),l.Q6J("items",t.listCompany)("multiple",!1)("closeOnSelect",!0)("hideSelected",!1)("placeholder",null==t.fields[1]?null:t.fields[1].placeholder),l.xp6(4),l.hij("",null==t.fields[2]?null:t.fields[2].label,":"),l.xp6(1),l.Q6J("matDatepicker",e)("placeholder",null==t.fields[2]?null:t.fields[2].placeholder),l.xp6(1),l.Q6J("for",e),l.xp6(4),l.Q6J("ngIf",t.editForm.get("date").hasError("required")&&t.editForm.get("date").touched),l.xp6(3),l.hij(" ",null==t.fields[3]?null:t.fields[3].label," "),l.xp6(1),l.Q6J("color","primary"),l.xp6(4),l.hij(" ",null==t.fields[4]?null:t.fields[4].label," "),l.xp6(1),l.Q6J("color","primary"),l.xp6(13),l.Q6J("animationDuration","0"),l.xp6(3),l.Q6J("formGroup",t.searchForm),l.xp6(7),l.Q6J("ngForOf",t.fields),l.xp6(1),l.Q6J("ngIf","date"==t.searchForm.controls.field.value.field)("ngIfThen",i)("ngIfElse",r),l.xp6(13),l.Q6J("ngForOf",t.fields),l.xp6(4),l.Q6J("ngForOf",t.listRegistry),l.xp6(2),l.Q6J("length",t.pagination.length)("pageSize",t.pagination.pageSize)("showFirstLastButtons",t.pagination.showFirstLastButtons)("pageSizeOptions",t.pagination.pageSizeOptions)("pageIndex",t.pagination.pageIndex),l.xp6(3),l.Q6J("formGroup",t.newForm),l.xp6(10),l.Q6J("items",t.listCompany)("multiple",!1)("closeOnSelect",!0)("hideSelected",!1)("placeholder",null==t.fields[1]?null:t.fields[1].placeholder),l.xp6(4),l.hij("",null==t.fields[2]?null:t.fields[2].label,":"),l.xp6(1),l.Q6J("matDatepicker",a)("placeholder",null==t.fields[2]?null:t.fields[2].placeholder),l.xp6(1),l.Q6J("for",a),l.xp6(3),l.Q6J("ngIf",t.newForm.get("date").hasError("required")&&t.newForm.get("date").touched),l.xp6(3),l.hij(" ",null==t.fields[3]?null:t.fields[3].label," "),l.xp6(1),l.Q6J("color","primary"),l.xp6(4),l.hij(" ",null==t.fields[4]?null:t.fields[4].label," "),l.xp6(1),l.Q6J("color","primary")}},directives:[y.F,a._Y,a.JL,a.sg,q.d,v.hX,A.w9,a.JJ,a.u,A.Z2,v.KE,w.Nt,a.Fj,x.hl,x.nW,v.R9,x.Mq,T.Hw,v.qo,r.O5,k.Rr,D.lW,S.SP,S.uX,I.gD,r.sg,U.NW,v.TO,N.ey],pipes:[r.uU],styles:[""]}),e})();var j=i(11494),V=i(63423),W=i(25553),K=i(82120),G=i(36063);const X=[{path:"",component:P}];let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({providers:[{provide:N._A,useClass:G.t7,deps:[N.Ad]},{provide:N.sG,useValue:G.$o}],imports:[[r.ez,V.Bz.forChild(X),W.J,T.Ps,S.Nh,q.t,v.lN,w.c,K.k,I.LD,a.UX,a.u5,j.JX,D.ot,x.FA,k.rP,A.A0,U.TU]]}),e})()},53817:function(e,t,i){i.d(t,{J:function(){return g}});var r=i(50752),a=i(59193),n=i(94402),o=i(40205),l=i(15257),s=i(5304),c=i(37716),d=i(94270),u=i(1400);let g=(()=>{class e{constructor(e,t,i){this.apollo=e,this.supaBaseService=t,this._fuseConfirmationService=i,this.table="company"}getCompanies(e){return this.apollo.watchQuery({query:r.Ps`
          query listCompanies {
            companies${e} {
              pageInfo {
                hasNextPage
                hasPreviousPage
              }
              edges {
                node {
                  id
                  name
                  code
                  contact
                  position
                  email
                  phone_number
                  id_institution_type {
                    edges {
                      node {
                        id
                        name
                      }
                    }
                  }
                  id_institution_clasification {
                    edges {
                      node {
                        id
                        name
                      }
                    }
                  }
                }
              }
              count
            }
          }
        `,fetchPolicy:"network-only"}).valueChanges.pipe((0,l.q)(1),(0,s.K)((e,t)=>(this.errorHandle(e),a.E)))}get(e=[],t=0,i=100){return(0,n.D)(this.supaBaseService.onSelectRequest(this.table,t,i,"\n    *, \n    id_institution_type!inner(*), \n    id_institution_clasification!inner(*)\n    ",e)).pipe((0,l.q)(1),(0,s.K)((e,t)=>(this.errorHandle(e),a.E)))}getClasificationCompany(e=[],t=0,i=100){return(0,n.D)(this.supaBaseService.onSelectRequest("institution_clasification",t,i,"\n    *\n    ",e)).pipe((0,l.q)(1),(0,s.K)((e,t)=>(this.errorHandle(e),a.E)))}getTypesCompany(e=[],t=0,i=100){return(0,n.D)(this.supaBaseService.onSelectRequest("institution_type",t,i,"\n    *\n    ",e)).pipe((0,l.q)(1),(0,s.K)((e,t)=>(this.errorHandle(e),a.E)))}insert(e){return(0,n.D)(this.supaBaseService.onInsertRequest(this.table,e)).pipe((0,l.q)(1),(0,s.K)((e,t)=>(this.errorHandle(e),a.E)))}update(e,t){return(0,n.D)(this.supaBaseService.onUpdateRequest(this.table,t,e)).pipe((0,l.q)(1),(0,s.K)((e,t)=>(this.errorHandle(e),a.E)))}delete(e){return(0,n.D)(this.supaBaseService.onDeleteRequest(this.table,e)).pipe((0,l.q)(1),(0,s.K)((e,t)=>(this.errorHandle(e),a.E)))}buildQuery(e){let t=[];for(let i=0;i<e.length;i+=3)t.push("relation"==e[i+2]?`${e[i]}:{have:{name:{matchesRegex:"${e[i+1]}"}}}`:`${e[i]}:{matchesRegex:"${e[i+1]}"}`);return`(where:{${t.toString()}})`}onSuccessDialog(e){this._fuseConfirmationService.open({title:"Alerta",message:`Se ${e} el registro correctamente.`,icon:{show:!0,name:"heroicons_outline:badge-check",color:"success"},actions:{confirm:{show:!1,label:"Si",color:"primary"},cancel:{show:!1,label:"No"}},dismissible:!0})}errorHandle(e){return this._fuseConfirmationService.open({title:"Error",message:"Error insperado!!!",icon:{show:!0,name:"heroicons_outline:exclamation",color:"error"},actions:{confirm:{show:!1,label:"string",color:"primary"},cancel:{show:!1,label:"string"}},dismissible:!0}),(0,o._)("error")}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(r._M),c.LFG(d.P),c.LFG(u.R))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);