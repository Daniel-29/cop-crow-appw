!function(){"use strict";var e,t,n,r,i;function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=u(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[8643],{36063:function(e,t,n){n.d(t,{$o:function(){return v},t7:function(){return h}});var r=n(37716),i=n(72458),a=n(16738),l=n.n(a)()||a,u=new r.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function g(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t(r);return n}var m,h=((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(n,e);var t=f(n);function n(e,r){var i;return o(this,n),(i=t.call(this))._options=r,i.setLocale(e||l.locale()),i}return s(n,[{key:"setLocale",value:function(e){var t=this;c(p(n.prototype),"setLocale",this).call(this,e);var r=l.localeData(e);this._localeData={firstDayOfWeek:r.firstDayOfWeek(),longMonths:r.months(),shortMonths:r.monthsShort(),dates:g(31,function(e){return t.createDate(2017,0,e+1).format("D")}),longDaysOfWeek:r.weekdays(),shortDaysOfWeek:r.weekdaysShort(),narrowDaysOfWeek:r.weekdaysMin()}}},{key:"getYear",value:function(e){return this.clone(e).year()}},{key:"getMonth",value:function(e){return this.clone(e).month()}},{key:"getDate",value:function(e){return this.clone(e).date()}},{key:"getDayOfWeek",value:function(e){return this.clone(e).day()}},{key:"getMonthNames",value:function(e){return"long"==e?this._localeData.longMonths:this._localeData.shortMonths}},{key:"getDateNames",value:function(){return this._localeData.dates}},{key:"getDayOfWeekNames",value:function(e){return"long"==e?this._localeData.longDaysOfWeek:"short"==e?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}},{key:"getYearName",value:function(e){return this.clone(e).format("YYYY")}},{key:"getFirstDayOfWeek",value:function(){return this._localeData.firstDayOfWeek}},{key:"getNumDaysInMonth",value:function(e){return this.clone(e).daysInMonth()}},{key:"clone",value:function(e){return e.clone().locale(this.locale)}},{key:"createDate",value:function(e,t,n){var r=this._createMoment({year:e,month:t,date:n}).locale(this.locale);return r.isValid(),r}},{key:"today",value:function(){return this._createMoment().locale(this.locale)}},{key:"parse",value:function(e,t){return e&&"string"==typeof e?this._createMoment(e,t,this.locale):e?this._createMoment(e).locale(this.locale):null}},{key:"format",value:function(e,t){return e=this.clone(e),this.isValid(e),e.format(t)}},{key:"addCalendarYears",value:function(e,t){return this.clone(e).add({years:t})}},{key:"addCalendarMonths",value:function(e,t){return this.clone(e).add({months:t})}},{key:"addCalendarDays",value:function(e,t){return this.clone(e).add({days:t})}},{key:"toIso8601",value:function(e){return this.clone(e).format()}},{key:"deserialize",value:function(e){var t;if(e instanceof Date)t=this._createMoment(e).locale(this.locale);else if(this.isDateInstance(e))return this.clone(e);if("string"==typeof e){if(!e)return null;t=this._createMoment(e,l.ISO_8601).locale(this.locale)}return t&&this.isValid(t)?this._createMoment(t).locale(this.locale):c(p(n.prototype),"deserialize",this).call(this,e)}},{key:"isDateInstance",value:function(e){return l.isMoment(e)}},{key:"isValid",value:function(e){return this.clone(e).isValid()}},{key:"invalid",value:function(){return l.invalid()}},{key:"_createMoment",value:function(e,t,n){var r=this._options||{},i=r.strict;return r.useUtc?l.utc(e,t,n,i):l(e,t,n,i)}}]),n}(i._A)).\u0275fac=function(e){return new(e||m)(r.LFG(i.Ad,8),r.LFG(u,8))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac}),m),v={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}},18643:function(i,l,c){c.r(l),c.d(l,{AgreementsModule:function(){return se}});var u,d=c(38583),f=c(3679),g=c(16738),p=c.n(g),m=c(37716),h=c(32489),v=c(1400),y=c(53817),Z=c(50752),b=c(94402),_=c(40205),k=c(59193),q=c(15257),w=c(93342),A=c(5304),x=c(94270),T=((u=function(){function i(e,t,n){o(this,i),this.apollo=e,this.supaBaseService=t,this._fuseConfirmationService=n,this.table="agreement",this.tableOtM="category"}return s(i,[{key:"get",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return(0,b.D)(this.supaBaseService.onSelectRequest(this.table,n,r,"id,updated_at,created_at,date,letter_signature,director_signature,id_company!inner(*)",t)).pipe((0,q.q)(1),(0,w.b)(function(e){if(null!=e.error)throw(0,_._)(e.error)}),(0,A.K)(function(t,n){return e.errorHandle(t),k.E}))}},{key:"insert",value:function(e){var t=this;return(0,b.D)(this.supaBaseService.onInsertRequest(this.table,e)).pipe((0,q.q)(1),(0,w.b)(function(e){if(null!=e.error)throw(0,_._)(e.error)}),(0,A.K)(function(e,n){return t.errorHandle(e),k.E}))}},{key:"update",value:function(e,t){var n=this;return(0,b.D)(this.supaBaseService.onUpdateRequest(this.table,t,e)).pipe((0,q.q)(1),(0,w.b)(function(e){if(null!=e.error)throw(0,_._)(e.error)}),(0,A.K)(function(e,t){return n.errorHandle(e),k.E}))}},{key:"delete",value:function(e){var t=this;return(0,b.D)(this.supaBaseService.onDeleteRequest(this.table,e)).pipe((0,q.q)(1),(0,w.b)(function(e){if(null!=e.error)throw(0,_._)(e.error)}),(0,A.K)(function(e,n){return t.errorHandle(e),k.E}))}},{key:"buildQuery",value:function(e){for(var t,n=[],r=0;r<e.length;r+=3)if("relation"==e[r+2])n.push("".concat(e[r],':{have:{name:{matchesRegex:"').concat(e[r+1],'"}}}'));else if("code"==e[r+2])n.push("".concat(e[r],':{have:{code:{matchesRegex:"').concat(e[r+1],'"}}}'));else if("bool"==e[r+2])t="Si"==e[r+1],n.push("".concat(e[r],":{equalTo:").concat(t,"}"));else if("number"==e[r+2])t="Si"==e[r+1],n.push("".concat(e[r],":{equalTo:").concat(e[r+1],"}"));else if("date"==e[r+2]){var i=new Date((e[r+1]+"T00:00:00").toString()),a=new Date((e[r+1]+"T23:59:59").toString());n.push("".concat(e[r],':{greaterThanOrEqualTo:"').concat(i.toISOString(),'", lessThanOrEqualTo:"').concat(a.toISOString(),'" }'))}else n.push("".concat(e[r],':{matchesRegex:"').concat(e[r+1],'"}'));return"(where:{".concat(n.toString(),"})")}},{key:"getAgreements",value:function(t){var n=this;return this.apollo.watchQuery({query:Z.Ps(e||(e=a(["\n          query listAgreements{\n            agreements","  {\n              pageInfo {\n                hasNextPage\n                hasPreviousPage\n              }\n              edges {\n                node {\n                  id\n                  date\n                  letter_signature\n                  director_signature\n                  id_company {\n                    edges {\n                      node {\n                        id\n                        code\n                        name\n                      }\n                    }\n                  }\n                }\n              }\n              count\n            }\n          }\n        "])),t),fetchPolicy:"network-only"}).valueChanges.pipe((0,q.q)(1),(0,A.K)(function(e,t){return n.errorHandle(e),k.E}))}},{key:"onCreateAgreement",value:function(e,n,r,i){var o=this;return this.apollo.mutate({mutation:Z.Ps(t||(t=a(["\n          mutation createAgreement(\n            $id_company: CompanyRelationInput!\n            $date: Date!\n            $letter_signature: Boolean!\n            $director_signature: Boolean!\n          ) {\n            createAgreement(\n              input: {\n                fields: {\n                  id_company: $id_company\n                  date: $date\n                  letter_signature: $letter_signature\n                  director_signature: $director_signature\n                }\n              }\n            ) {\n              agreement {\n                id\n              }\n            }\n          }\n        "]))),variables:{id_company:{add:e},date:n,letter_signature:r,director_signature:i}}).pipe((0,q.q)(1),(0,A.K)(function(e,t){return o.errorHandle(e),k.E}))}},{key:"onEditAgreement",value:function(e,t,r,i,o){var l=this;return this.apollo.mutate({mutation:Z.Ps(n||(n=a(["\n          mutation updateAgreement(\n            $id: ID!\n            $id_company: CompanyRelationInput!\n            $date: Date!\n            $letter_signature: Boolean!\n            $director_signature: Boolean!\n          ) {\n            updateAgreement(\n              input: {\n                id: $id\n                fields: {\n                  id_company: $id_company\n                  date: $date\n                  letter_signature: $letter_signature\n                  director_signature: $director_signature\n                }\n              }\n            ) {\n              agreement {\n                id\n              }\n            }\n          }\n        "]))),variables:{id:e,id_company:{add:t},date:r,letter_signature:i,director_signature:o}}).pipe((0,q.q)(1),(0,A.K)(function(e,t){return l.errorHandle(e),k.E}))}},{key:"onDeleteAgreement",value:function(e){var t=this;return this.apollo.mutate({mutation:Z.Ps(r||(r=a(["\n          mutation deleteAgreement($id: ID!) {\n            deleteAgreement(input: { id: $id }) {\n              agreement {\n                id\n              }\n            }\n          }\n        "]))),variables:{id:e}}).pipe((0,q.q)(1),(0,A.K)(function(e,n){return t.errorHandle(e),k.E}))}},{key:"onSuccessDialog",value:function(e){this._fuseConfirmationService.open({title:"Alerta",message:"Se ".concat(e," el registro correctamente."),icon:{show:!0,name:"heroicons_outline:badge-check",color:"success"},actions:{confirm:{show:!1,label:"Si",color:"primary"},cancel:{show:!1,label:"No"}},dismissible:!0})}},{key:"errorHandle",value:function(e){return this._fuseConfirmationService.open({title:"Error",message:"Error insperado!!!",icon:{show:!0,name:"heroicons_outline:exclamation",color:"error"},actions:{confirm:{show:!1,label:"string",color:"primary"},cancel:{show:!1,label:"string"}},dismissible:!0}),(0,_._)("error")}}]),i}()).\u0275fac=function(e){return new(e||u)(m.LFG(Z._M),m.LFG(x.P),m.LFG(v.R))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u),D=c(26927),S=c(1769),I=c(98295),U=c(86640),O=c(49983),N=c(43220),F=c(76627),M=c(45396),J=c(51095),C=c(65939),L=c(67441),E=c(99692),R=c(72458);function Q(e,t){if(1&e&&(m.TgZ(0,"div",68),m.TgZ(1,"div",69),m.TgZ(2,"div",70),m.TgZ(3,"h5",71),m._uU(4),m.qZA(),m.TgZ(5,"p",72),m._uU(6),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e){var n=t.item,r=t.searchTerm;m.xp6(3),m.Q6J("ngOptionHighlight",r),m.xp6(1),m.AsE(" ",n.code," - ",n.name," "),m.xp6(2),m.HOy(" ",n.id_institution_clasification.name,"- ",n.id_institution_type.name,"- ",n.phone_number," ",n.email," ")}}function j(e,t){1&e&&(m.TgZ(0,"mat-error"),m._uU(1,"Debe ingresar este campo!!"),m.qZA())}function Y(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"mat-option",73),m._uU(2),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(1),m.Q6J("value",n),m.xp6(1),m.Oqu(n.label)}}function P(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Y,3,2,"div",25),m.BQk()),2&e){var n=t.$implicit;m.xp6(1),m.Q6J("ngIf",1==n.searchable)}}function z(e,t){1&e&&m._UZ(0,"div")}function B(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1,"Debe ingresar este campo!!"),m.qZA())}function H(e,t){if(1&e&&(m.TgZ(0,"mat-form-field",74),m._UZ(1,"mat-icon",75),m._UZ(2,"input",76),m._UZ(3,"mat-datepicker-toggle",22),m._UZ(4,"mat-datepicker",null,77),m.TgZ(6,"mat-error"),m.YNc(7,B,2,0,"span",25),m.qZA(),m.qZA()),2&e){var n=m.MAs(5),r=m.oxw();m.Q6J("floatLabel","always"),m.xp6(1),m.Q6J("svgIcon","heroicons_solid:search"),m.xp6(1),m.Q6J("matDatepicker",n)("placeholder",r.Desde),m.xp6(1),m.Q6J("for",n),m.xp6(4),m.Q6J("ngIf",r.searchForm.get("value").hasError("required")&&r.searchForm.get("value").touched)}}function $(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1,"Debe ingresar este campo!!"),m.qZA())}function V(e,t){if(1&e&&(m.TgZ(0,"mat-form-field",74),m._UZ(1,"mat-icon",75),m._UZ(2,"input",78),m.TgZ(3,"mat-error"),m.YNc(4,$,2,0,"span",25),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.Q6J("floatLabel","always"),m.xp6(1),m.Q6J("svgIcon","heroicons_solid:search"),m.xp6(3),m.Q6J("ngIf",n.searchForm.get("value").hasError("required")&&n.searchForm.get("value").touched)}}function W(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"th",54),m._uU(2),m.qZA(),m.BQk()),2&e){var n=t.$implicit;m.xp6(2),m.hij(" ",n.label," ")}}function K(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"tr",79),m.TgZ(1,"td",80),m._uU(2),m.qZA(),m.TgZ(3,"td",81),m._uU(4),m.qZA(),m.TgZ(5,"td",81),m._uU(6),m.ALo(7,"date"),m.qZA(),m.TgZ(8,"td",81),m._uU(9),m.qZA(),m.TgZ(10,"td",81),m._uU(11),m.qZA(),m.TgZ(12,"td",81),m.TgZ(13,"div",82),m.TgZ(14,"button",83),m.NdJ("click",function(){var e=m.CHM(n).$implicit;return m.oxw().toggleDrawerOpen("leftDrawer",e)}),m.TgZ(15,"mat-icon",84),m.O4$(),m.TgZ(16,"svg",85),m._UZ(17,"path",86),m.qZA(),m.qZA(),m.kcU(),m.TgZ(18,"span",87),m._uU(19,"Editar"),m.qZA(),m.qZA(),m.TgZ(20,"button",88),m.NdJ("click",function(){var e=m.CHM(n).$implicit;return m.oxw().onDeleteRegistry(e.id)}),m.TgZ(21,"mat-icon",89),m.O4$(),m.TgZ(22,"svg",85),m._UZ(23,"path",90),m.qZA(),m.qZA(),m.kcU(),m.TgZ(24,"span",87),m._uU(25,"Eliminar"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){var r=t.$implicit;m.xp6(2),m.hij(" ",r.id_company.code," "),m.xp6(2),m.hij(" ",r.id_company.name," "),m.xp6(2),m.hij(" ",m.xi3(7,5,r.date,"yyyy-MM-dd")," "),m.xp6(3),m.hij(" ",r.director_signature?"Si requiere":"No requiere"," "),m.xp6(2),m.hij(" ",r.letter_signature?"Firmado":"Sin firmar"," ")}}function G(e,t){if(1&e&&(m.TgZ(0,"div",68),m.TgZ(1,"div",69),m.TgZ(2,"div",70),m.TgZ(3,"h5",71),m._uU(4),m.qZA(),m.TgZ(5,"p",72),m._uU(6),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e){var n=t.item,r=t.searchTerm;m.xp6(3),m.Q6J("ngOptionHighlight",r),m.xp6(1),m.AsE(" ",n.code," - ",n.name," "),m.xp6(2),m.HOy(" ",n.id_institution_clasification.name,"- ",n.id_institution_type.name,"- ",n.phone_number," ",n.email," ")}}function X(e,t){1&e&&(m.TgZ(0,"mat-error"),m._uU(1,"Debe ingresar este campo!!"),m.qZA())}var ee=p()||g,te=function(){var e=function(){function e(t,n,r,i){o(this,e),this._fuseDrawerService=t,this._fuseConfirmationService=n,this.companyService=r,this.agreementsService=i,this.fields=[{label:"Codigo",field:"id_company",type:"ilike",subfield:"code",searchable:!0,placeholder:"Nombre del programa",icon:"office-building"},{label:"Empresa",field:"id_company",type:"ilike",subfield:"name",searchable:!0,placeholder:"Nombre de la empresa",icon:"office-building"},{label:"Fecha",field:"date",type:"date",subfield:null,searchable:!0,placeholder:"Fecha"},{label:"Requiere firma del rector (Si/NO)",field:"director_signature",type:"ilike",subfield:null,searchable:!1,placeholder:"Firma rector",icon:"office-building"},{label:"Carta/ convenio firmado",field:"letter_signature",type:"ilike",subfield:null,searchable:!1,placeholder:"Firma carta",icon:"office-building"}],this.listRegistry=[],this.listCompany=[],this.newForm=new f.cw({date:new f.NI(ee(new Date),[f.kI.minLength(3),f.kI.required]),id_company:new f.NI(null,[f.kI.minLength(3),f.kI.required]),director_signature:new f.NI(!1,[f.kI.minLength(3),f.kI.required]),letter_signature:new f.NI(!1,[f.kI.minLength(3),f.kI.required])}),this.searchForm=new f.cw({field:new f.NI(this.fields[0],[f.kI.minLength(1),f.kI.required]),value:new f.NI("",[f.kI.minLength(1),f.kI.required])}),this.editForm=new f.cw({id:new f.NI("",[f.kI.minLength(3),f.kI.required]),date:new f.NI(ee(new Date),[f.kI.minLength(3),f.kI.required]),id_company:new f.NI(null,[f.kI.minLength(3),f.kI.required]),director_signature:new f.NI(!1,[f.kI.minLength(3),f.kI.required]),letter_signature:new f.NI(!1,[f.kI.minLength(3),f.kI.required])}),this.pagination={length:100,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,50,100],showFirstLastButtons:!1},this.onLoadMainData(),this.onLoadCompanies(null)}return s(e,[{key:"handlePageEvent",value:function(e){this.pagination.length=e.length,this.pagination.pageSize=e.pageSize,this.pagination.pageIndex=e.pageIndex,this.onLoadMainData()}},{key:"onLoadMainData",value:function(){var e=this;this.agreementsService.get([],this.pagination.pageSize*this.pagination.pageIndex,this.pagination.pageSize).subscribe(function(t){e.listRegistry=t.data})}},{key:"onSearchMainData",value:function(){var e=this;this.searchForm.valid&&this.agreementsService.get([{field:this.searchForm.controls.field.value.field,value:this.searchForm.controls.value.value,type:this.searchForm.controls.field.value.type,subfield:this.searchForm.controls.field.value.subfield}],this.pagination.pageSize*this.pagination.pageIndex,this.pagination.pageSize).subscribe(function(t){e.listRegistry=t.data})}},{key:"onLoadCompanies",value:function(e){var t=this;if(null!=e){var n=e.term.split(" "),r={field:"name",value:null!=n[1]?n[1]:"",type:"",subfield:null};n.push({field:"code",value:null!=n[0]?n[0]:"",type:"",subfield:null}),n.push(r)}this.companyService.get([]).subscribe(function(e){t.listCompany=e.data})}},{key:"ngOnInit",value:function(){}},{key:"onEditRegistry",value:function(){var e=this;if(this.editForm.valid){var t=this.editForm.getRawValue(),n=t.id;delete t.id,this.agreementsService.update(n,t).subscribe(function(t){e.agreementsService.onSuccessDialog("actualizo"),e.onLoadMainData()})}}},{key:"onNewRegistry",value:function(){var e=this;this.newForm.valid&&this.agreementsService.insert(this.newForm.getRawValue()).subscribe(function(t){e.agreementsService.onSuccessDialog("creo"),e.newForm.reset(),e.newForm.controls.director_signature.setValue(!1),e.newForm.controls.letter_signature.setValue(!1),e.onLoadMainData()})}},{key:"onDeleteRegistry",value:function(e){var t=this;this._fuseConfirmationService.open({title:"Alerta",message:"Desea eliminar este registro?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{show:!0,label:"Si",color:"primary"},cancel:{show:!0,label:"No"}},dismissible:!1}).afterClosed().subscribe(function(n){"confirmed"==n&&t.agreementsService.delete(e).subscribe(function(e){t.onLoadMainData()})})}},{key:"toggleDrawerOpen",value:function(e,t){t&&(this.editForm.controls.id.setValue(t.id),this.editForm.controls.id_company.setValue(t.id_company.id),this.editForm.controls.date.setValue(t.date),this.editForm.controls.letter_signature.setValue(t.letter_signature),this.editForm.controls.director_signature.setValue(t.director_signature)),this._fuseDrawerService.getComponent(e).toggle()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.Y36(h._),m.Y36(v.R),m.Y36(y.J),m.Y36(T))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-agreements"]],decls:131,vars:47,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex-auto","pt-6","sm:px-4","sm:pb-4","relative","flex","overflow-hidden"],[1,"w-3/5","make-drawer-content-scrollable",3,"name","opened","mode"],[1,"flex","justify-center","h-400","min-h-400","max-h-400","border-2","border-dashed","border-gray-300","p-6"],[1,"ng-untouched","ng-pristine","ng-valid",3,"formGroup"],[1,"flex","flex-col","mt-2","bg-card","shadow","rounded"],[1,"p-8","bg-gray-50","dark:bg-gray-700"],[1,"text-lg","font-medium"],[1,"text-secondary"],["role","separator","aria-orientation","horizontal",1,"mat-divider","mat-divider-horizontal"],[1,"mt-4","p-2","pb-2"],[1,""],["appearance","outline","bindLabel","name","bindValue","id","formControlName","id_company",1,"mt-2",3,"items","multiple","closeOnSelect","hideSelected","placeholder","search"],["ng-option-tmp",""],[1,"fuse-mat-no-subscript","w-full"],["matInput","","formControlName","date",3,"matDatepicker","placeholder"],["matSuffix","",3,"for"],["dpEdit",""],["matPrefix","",1,"icon-size-5"],[4,"ngIf"],[1,"flex","items-center","justify-between"],[1,"flex-auto","leading-6","cursor-pointer",3,"click"],["formControlName","director_signature",1,"ml-2",3,"color"],["directorSignature",""],["formControlName","letter_signature",1,"ml-2",3,"color"],["letterSignature",""],[1,"flex","items-center","justify-end","mt-10"],["mat-button","",1,"mat-focus-indicator","mat-button","mat-button-base",3,"click"],[1,"mat-button-wrapper"],["matripple","","ng-reflect-disabled","false","ng-reflect-centered","false","ng-reflect-trigger","[object HTMLButtonElement]",1,"mat-ripple","mat-button-ripple"],[1,"mat-button-focus-overlay"],["mat-flat-button","","ng-reflect-color","primary",1,"mat-focus-indicator","px-6","ml-3","mat-flat-button","mat-button-base","mat-primary"],["type","submit",1,"mat-button-wrapper",3,"click"],[1,"w-full","h-full",3,"animationDuration"],["label","Ver registros"],[1,"h-full","w-full","min-w-0","ng-star-inserted"],[1,"flex","flex-col","sm:flex-row","w-full","sm:max-w-none","mb-4",3,"formGroup"],["mat-stroked-button","",1,"h-full","mt-1","sm:mr-4",3,"click"],[1,"items-center","h-full"],[1,"fuse-mat-no-subscript","w-full","sm:w-1/5"],["formControlName","field"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],["mat-stroked-button","",1,"h-full","mt-1","sm:ml-4",3,"click"],[1,"min-w-full","text-center"],[1,"border-b","bg-gray-800"],["scope","col",1,"text-sm","font-medium","text-white","px-6","py-4"],["class","bg-white border-b hover:bg-gray-300",4,"ngFor","ngForOf"],[1,"mt-14"],["aria-label","Select page",1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex","page"],["label","Agregar"],[1,"px-4","w-full","border-2","border-dashed","border-gray-300","rounded-2xl"],[1,"flex","flex-col","mt-8","bg-card","shadow","rounded","overflow-hidden"],[1,"mt-8","p-8","pb-4"],["dpNew",""],["director_signature",""],["letter_signature",""],["submit","none","mat-button","",1,"mat-focus-indicator","mat-button","mat-button-base"],["mat-flat-button","","ng-reflect-color","primary",1,"mat-focus-indicator","px-6","ml-3","mat-flat-button","mat-button-base","mat-primary",3,"click"],["type","none",1,"mat-button-wrapper"],[1,"my-2","py-4","px-5","rounded-lg","bg-gray-200","dark:bg-gray-800"],[1,"card"],[1,"card-body"],[1,"card-title","text-2xl","font-semibold","leading-tight",3,"ngOptionHighlight"],[1,"card-text"],[3,"value"],[1,"fuse-mat-no-subscript","w-full","sm:w-3/6","mt-4","sm:mt-0","sm:ml-4",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","formControlName","value",3,"matDatepicker","placeholder"],["editDate",""],["placeholder","Search by title or description","matInput","","formControlName","value"],[1,"bg-white","border-b","hover:bg-gray-300"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-900","font-light","whitespace-nowrap"],[1,"flex","items-center","w-full"],[1,"flex","flex-auto","items-center","justify-center","py-4","hover:bg-amber-500",3,"click"],["role","img","aria-hidden","true","data-mat-icon-type","svg","data-mat-icon-name","mail","data-mat-icon-namespace","heroicons_solid",1,"mat-icon","notranslate","icon-size-5","mat-icon-no-color"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"ml-2"],[1,"flex","flex-auto","items-center","justify-center","py-4","hover:bg-red-500",3,"click"],["role","img","aria-hidden","true","data-mat-icon-type","svg","data-mat-icon-name","phone","data-mat-icon-namespace","heroicons_solid",1,"mat-icon","notranslate","icon-size-5","mat-icon-no-color"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"div",3),m.TgZ(4,"div"),m.TgZ(5,"a",4),m._uU(6,"Empleabilidad"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(7,"div",5),m.TgZ(8,"h2",6),m._uU(9," Administracion de convenios "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"div",7),m.TgZ(11,"fuse-drawer",8),m.TgZ(12,"div",9),m.TgZ(13,"form",10),m.TgZ(14,"div",11),m.TgZ(15,"div",12),m.TgZ(16,"p",13),m._uU(17," Formulario de modificacion de convenio "),m.qZA(),m.TgZ(18,"p",14),m._uU(19,"Rellene los campos a continuacion."),m.qZA(),m.qZA(),m._UZ(20,"mat-divider",15),m.TgZ(21,"div",16),m.TgZ(22,"div",17),m.TgZ(23,"mat-label"),m._uU(24),m.qZA(),m.TgZ(25,"ng-select",18),m.NdJ("search",function(e){return t.onLoadCompanies(e)}),m.YNc(26,Q,7,7,"ng-template",19),m.qZA(),m.TgZ(27,"mat-form-field",20),m.TgZ(28,"mat-label"),m._uU(29),m.qZA(),m._UZ(30,"input",21),m._UZ(31,"mat-datepicker-toggle",22),m._UZ(32,"mat-datepicker",null,23),m._UZ(34,"mat-icon",24),m.qZA(),m.YNc(35,j,2,0,"mat-error",25),m.TgZ(36,"div",26),m.TgZ(37,"div",27),m.NdJ("click",function(){return m.CHM(n),m.MAs(40).toggle()}),m._uU(38),m.qZA(),m._UZ(39,"mat-slide-toggle",28,29),m.qZA(),m.TgZ(41,"div",26),m.TgZ(42,"div",27),m.NdJ("click",function(){return m.CHM(n),m.MAs(45).toggle()}),m._uU(43),m.qZA(),m._UZ(44,"mat-slide-toggle",30,31),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(46,"div",32),m.TgZ(47,"button",33),m.NdJ("click",function(){return t.toggleDrawerOpen("leftDrawer")}),m.TgZ(48,"span",34),m._uU(49," Cancelar "),m.qZA(),m._UZ(50,"span",35),m._UZ(51,"span",36),m.qZA(),m.TgZ(52,"button",37),m.TgZ(53,"button",38),m.NdJ("click",function(){return t.onEditRegistry(),t.toggleDrawerOpen("leftDrawer")}),m._uU(54," Guardar"),m.qZA(),m._UZ(55,"span",35),m._UZ(56,"span",36),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(57,"mat-tab-group",39),m.TgZ(58,"mat-tab",40),m.TgZ(59,"div",41),m.TgZ(60,"form",42),m.TgZ(61,"button",43),m.NdJ("click",function(){return t.onLoadMainData()}),m.TgZ(62,"span",44),m.TgZ(63,"span"),m._uU(64,"Reset"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(65,"mat-form-field",45),m.TgZ(66,"mat-select",46),m.YNc(67,P,2,1,"ng-container",47),m.qZA(),m.qZA(),m.YNc(68,z,1,0,"div",48),m.YNc(69,H,8,6,"ng-template",null,49,m.W1O),m.YNc(71,V,5,3,"ng-template",null,50,m.W1O),m.TgZ(73,"button",51),m.NdJ("click",function(){return t.onSearchMainData()}),m.TgZ(74,"span",44),m.TgZ(75,"span"),m._uU(76,"Buscar"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.ynx(77),m.TgZ(78,"table",52),m.TgZ(79,"thead",53),m.TgZ(80,"tr"),m.YNc(81,W,3,1,"ng-container",47),m.TgZ(82,"th",54),m._uU(83," Acciones "),m.qZA(),m.qZA(),m.qZA(),m.TgZ(84,"tbody"),m.YNc(85,K,26,8,"tr",55),m.qZA(),m.qZA(),m.TgZ(86,"div",56),m.TgZ(87,"mat-paginator",57),m.NdJ("page",function(e){return t.handlePageEvent(e)}),m.qZA(),m.qZA(),m.BQk(),m.qZA(),m.qZA(),m.TgZ(88,"mat-tab",58),m.TgZ(89,"div",59),m.TgZ(90,"form",10),m.TgZ(91,"div",60),m.TgZ(92,"div",12),m.TgZ(93,"p",13),m._uU(94," Formulario de registro de convenios "),m.qZA(),m.TgZ(95,"p",14),m._uU(96,"Rellene los campos a continuacion."),m.qZA(),m.qZA(),m._UZ(97,"mat-divider",15),m.TgZ(98,"div",61),m.ynx(99),m.TgZ(100,"ng-select",18),m.NdJ("search",function(e){return t.onLoadCompanies(e)}),m.YNc(101,G,7,7,"ng-template",19),m.qZA(),m.TgZ(102,"mat-form-field",20),m.TgZ(103,"mat-label"),m._uU(104),m.qZA(),m._UZ(105,"input",21),m._UZ(106,"mat-datepicker-toggle",22),m._UZ(107,"mat-datepicker",null,62),m.qZA(),m.YNc(109,X,2,0,"mat-error",25),m.TgZ(110,"div",26),m.TgZ(111,"div",27),m.NdJ("click",function(){return m.CHM(n),m.MAs(114).toggle()}),m._uU(112),m.qZA(),m._UZ(113,"mat-slide-toggle",28,63),m.qZA(),m.TgZ(115,"div",26),m.TgZ(116,"div",27),m.NdJ("click",function(){return m.CHM(n),m.MAs(119).toggle()}),m._uU(117),m.qZA(),m._UZ(118,"mat-slide-toggle",30,64),m.qZA(),m.BQk(),m.qZA(),m.qZA(),m.TgZ(120,"div",32),m.TgZ(121,"a",65),m.TgZ(122,"span",34),m._uU(123," Cancelar "),m.qZA(),m._UZ(124,"span",35),m._UZ(125,"span",36),m.qZA(),m.TgZ(126,"button",66),m.NdJ("click",function(){return t.onNewRegistry()}),m.TgZ(127,"span",67),m._uU(128,"Agregar"),m.qZA(),m._UZ(129,"span",35),m._UZ(130,"span",36),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){var r=m.MAs(33),i=m.MAs(70),a=m.MAs(72),o=m.MAs(108);m.xp6(11),m.Q6J("name","leftDrawer")("opened",!1)("mode","side"),m.xp6(2),m.Q6J("formGroup",t.editForm),m.xp6(11),m.hij("",null==t.fields[7]?null:t.fields[7].label,":"),m.xp6(1),m.Q6J("items",t.listCompany)("multiple",!1)("closeOnSelect",!0)("hideSelected",!1)("placeholder",null==t.fields[1]?null:t.fields[1].placeholder),m.xp6(4),m.hij("",null==t.fields[2]?null:t.fields[2].label,":"),m.xp6(1),m.Q6J("matDatepicker",r)("placeholder",null==t.fields[2]?null:t.fields[2].placeholder),m.xp6(1),m.Q6J("for",r),m.xp6(4),m.Q6J("ngIf",t.editForm.get("date").hasError("required")&&t.editForm.get("date").touched),m.xp6(3),m.hij(" ",null==t.fields[3]?null:t.fields[3].label," "),m.xp6(1),m.Q6J("color","primary"),m.xp6(4),m.hij(" ",null==t.fields[4]?null:t.fields[4].label," "),m.xp6(1),m.Q6J("color","primary"),m.xp6(13),m.Q6J("animationDuration","0"),m.xp6(3),m.Q6J("formGroup",t.searchForm),m.xp6(7),m.Q6J("ngForOf",t.fields),m.xp6(1),m.Q6J("ngIf","date"==t.searchForm.controls.field.value.field)("ngIfThen",i)("ngIfElse",a),m.xp6(13),m.Q6J("ngForOf",t.fields),m.xp6(4),m.Q6J("ngForOf",t.listRegistry),m.xp6(2),m.Q6J("length",t.pagination.length)("pageSize",t.pagination.pageSize)("showFirstLastButtons",t.pagination.showFirstLastButtons)("pageSizeOptions",t.pagination.pageSizeOptions)("pageIndex",t.pagination.pageIndex),m.xp6(3),m.Q6J("formGroup",t.newForm),m.xp6(10),m.Q6J("items",t.listCompany)("multiple",!1)("closeOnSelect",!0)("hideSelected",!1)("placeholder",null==t.fields[1]?null:t.fields[1].placeholder),m.xp6(4),m.hij("",null==t.fields[2]?null:t.fields[2].label,":"),m.xp6(1),m.Q6J("matDatepicker",o)("placeholder",null==t.fields[2]?null:t.fields[2].placeholder),m.xp6(1),m.Q6J("for",o),m.xp6(3),m.Q6J("ngIf",t.newForm.get("date").hasError("required")&&t.newForm.get("date").touched),m.xp6(3),m.hij(" ",null==t.fields[3]?null:t.fields[3].label," "),m.xp6(1),m.Q6J("color","primary"),m.xp6(4),m.hij(" ",null==t.fields[4]?null:t.fields[4].label," "),m.xp6(1),m.Q6J("color","primary")}},directives:[D.F,f._Y,f.JL,f.sg,S.d,I.hX,U.w9,f.JJ,f.u,U.Z2,I.KE,O.Nt,f.Fj,N.hl,N.nW,I.R9,N.Mq,F.Hw,I.qo,d.O5,M.Rr,J.lW,C.SP,C.uX,L.gD,d.sg,E.NW,J.zs,I.TO,R.ey],pipes:[d.uU],styles:[""]}),e}(),ne=c(11494),re=c(63423),ie=c(25553),ae=c(82120),oe=c(36063),le=[{path:"",component:te}],se=function(){var e=s(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({providers:[{provide:R._A,useClass:oe.t7,deps:[R.Ad]},{provide:R.sG,useValue:oe.$o}],imports:[[d.ez,re.Bz.forChild(le),ie.J,F.Ps,C.Nh,S.t,I.lN,O.c,ae.k,L.LD,f.UX,f.u5,ne.JX,J.ot,N.FA,M.rP,U.A0,E.TU]]}),e}()},53817:function(e,t,n){n.d(t,{J:function(){return v}});var r,l=n(50752),c=n(59193),u=n(94402),d=n(40205),f=n(15257),g=n(5304),p=n(37716),m=n(94270),h=n(1400),v=((r=function(){function e(t,n,r){o(this,e),this.apollo=t,this.supaBaseService=n,this._fuseConfirmationService=r,this.table="company"}return s(e,[{key:"getCompanies",value:function(e){var t=this;return this.apollo.watchQuery({query:l.Ps(i||(i=a(["\n          query listCompanies {\n            companies"," {\n              pageInfo {\n                hasNextPage\n                hasPreviousPage\n              }\n              edges {\n                node {\n                  id\n                  name\n                  code\n                  contact\n                  position\n                  email\n                  phone_number\n                  id_institution_type {\n                    edges {\n                      node {\n                        id\n                        name\n                      }\n                    }\n                  }\n                  id_institution_clasification {\n                    edges {\n                      node {\n                        id\n                        name\n                      }\n                    }\n                  }\n                }\n              }\n              count\n            }\n          }\n        "])),e),fetchPolicy:"network-only"}).valueChanges.pipe((0,f.q)(1),(0,g.K)(function(e,n){return t.errorHandle(e),c.E}))}},{key:"get",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return(0,u.D)(this.supaBaseService.onSelectRequest(this.table,n,r,"\n    *, \n    id_institution_type!inner(*), \n    id_institution_clasification!inner(*)\n    ",t)).pipe((0,f.q)(1),(0,g.K)(function(t,n){return e.errorHandle(t),c.E}))}},{key:"getClasificationCompany",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return(0,u.D)(this.supaBaseService.onSelectRequest("institution_clasification",n,r,"\n    *\n    ",t)).pipe((0,f.q)(1),(0,g.K)(function(t,n){return e.errorHandle(t),c.E}))}},{key:"getTypesCompany",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return(0,u.D)(this.supaBaseService.onSelectRequest("institution_type",n,r,"\n    *\n    ",t)).pipe((0,f.q)(1),(0,g.K)(function(t,n){return e.errorHandle(t),c.E}))}},{key:"insert",value:function(e){var t=this;return(0,u.D)(this.supaBaseService.onInsertRequest(this.table,e)).pipe((0,f.q)(1),(0,g.K)(function(e,n){return t.errorHandle(e),c.E}))}},{key:"update",value:function(e,t){var n=this;return(0,u.D)(this.supaBaseService.onUpdateRequest(this.table,t,e)).pipe((0,f.q)(1),(0,g.K)(function(e,t){return n.errorHandle(e),c.E}))}},{key:"delete",value:function(e){var t=this;return(0,u.D)(this.supaBaseService.onDeleteRequest(this.table,e)).pipe((0,f.q)(1),(0,g.K)(function(e,n){return t.errorHandle(e),c.E}))}},{key:"buildQuery",value:function(e){for(var t=[],n=0;n<e.length;n+=3)t.push("relation"==e[n+2]?"".concat(e[n],':{have:{name:{matchesRegex:"').concat(e[n+1],'"}}}'):"".concat(e[n],':{matchesRegex:"').concat(e[n+1],'"}'));return"(where:{".concat(t.toString(),"})")}},{key:"onSuccessDialog",value:function(e){this._fuseConfirmationService.open({title:"Alerta",message:"Se ".concat(e," el registro correctamente."),icon:{show:!0,name:"heroicons_outline:badge-check",color:"success"},actions:{confirm:{show:!1,label:"Si",color:"primary"},cancel:{show:!1,label:"No"}},dismissible:!0})}},{key:"errorHandle",value:function(e){return this._fuseConfirmationService.open({title:"Error",message:"Error insperado!!!",icon:{show:!0,name:"heroicons_outline:exclamation",color:"error"},actions:{confirm:{show:!1,label:"string",color:"primary"},cancel:{show:!1,label:"string"}},dismissible:!0}),(0,d._)("error")}}]),e}()).\u0275fac=function(e){return new(e||r)(p.LFG(l._M),p.LFG(m.P),p.LFG(h.R))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)}}])}();